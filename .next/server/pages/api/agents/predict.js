"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/agents/predict";
exports.ids = ["pages/api/agents/predict"];
exports.modules = {

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fagents%2Fpredict&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fagents%2Fpredict.js&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fagents%2Fpredict&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fagents%2Fpredict.js&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_agents_predict_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/agents/predict.js */ \"(api)/./pages/api/agents/predict.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_agents_predict_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_agents_predict_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/agents/predict\",\n        pathname: \"/api/agents/predict\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_agents_predict_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmFnZW50cyUyRnByZWRpY3QmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRmFnZW50cyUyRnByZWRpY3QuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDMEQ7QUFDMUQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHlEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyx5REFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tb2x0Ym90LXByZXNzLz8xMjExIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlcy9hcGkvYWdlbnRzL3ByZWRpY3QuanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hZ2VudHMvcHJlZGljdFwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2FnZW50cy9wcmVkaWN0XCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fagents%2Fpredict&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fagents%2Fpredict.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./agents/agent-manager.js":
/*!*********************************!*\
  !*** ./agents/agent-manager.js ***!
  \*********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("// Main Agent Management System with Database Support\n\nconst AgentRegistry = __webpack_require__(/*! ./registry */ \"(api)/./agents/registry.js\");\nconst ContentGenerator = __webpack_require__(/*! ./content-generator */ \"(api)/./agents/content-generator.js\");\nconst AgentCommunication = __webpack_require__(/*! ./communication */ \"(api)/./agents/communication.js\");\nconst DatabaseService = __webpack_require__(/*! ./database-service */ \"(api)/./agents/database-service.js\");\nclass AgentManager {\n    constructor(){\n        this.registry = new AgentRegistry();\n        this.contentGenerator = new ContentGenerator();\n        this.communication = new AgentCommunication();\n        this.databaseService = new DatabaseService();\n        // 默认频道\n        this.communication.createChannel(\"general\");\n        this.communication.createChannel(\"announcements\");\n        this.communication.createChannel(\"predictions\");\n        this.communication.createChannel(\"articles\");\n        // 初始化数据库连接\n        this.initDatabase();\n    }\n    async initDatabase() {\n        try {\n            const connected = await this.databaseService.checkConnection();\n            if (connected) {\n                console.log(\"✅ Database connection established\");\n            } else {\n                console.log(\"⚠️  Database connection failed, using in-memory fallback\");\n            }\n        } catch (error) {\n            console.log(\"⚠️  Database connection failed, using in-memory fallback\");\n        }\n    }\n    // 注册新 agent\n    async registerAgent(agentData) {\n        // 先尝试注册到数据库\n        const dbResult = await this.databaseService.registerAgent(agentData);\n        // 同时维护内存中的注册\n        const agent = this.registry.registerAgent(agentData);\n        // 自动加入默认频道\n        this.communication.joinChannel(agent, \"general\");\n        this.communication.joinChannel(agent, \"announcements\");\n        return agent;\n    }\n    // agent 发言\n    async agentSpeak(agentId, channel, message, type = \"general\") {\n        const agent = this.registry.agents.get(agentId);\n        if (!agent) {\n            throw new Error(`Agent with ID ${agentId} not found`);\n        }\n        const msg = this.communication.sendMessage(agent, channel, message, type);\n        // 同时保存到数据库\n        await this.databaseService.saveMessage(msg);\n        return msg;\n    }\n    // agent 写文章\n    async agentWriteArticle(agentId, topic, length = \"medium\") {\n        const agent = this.registry.agents.get(agentId);\n        if (!agent) {\n            throw new Error(`Agent with ID ${agentId} not found`);\n        }\n        const article = await this.contentGenerator.generateArticle(agent, topic, length);\n        // 在文章频道发布通知\n        await this.agentSpeak(agentId, \"articles\", `New article published: \"${topic}\" by ${agent.name}`, \"announcement\");\n        // 保存到数据库\n        await this.databaseService.saveContent(article);\n        return article;\n    }\n    // agent 偽预测\n    async agentMakePrediction(agentId, subject, timeframe = \"short-term\", predictionData = null) {\n        const agent = this.registry.agents.get(agentId);\n        if (!agent) {\n            throw new Error(`Agent with ID ${agentId} not found`);\n        }\n        let prediction;\n        if (predictionData) {\n            // If prediction data is provided, use it directly\n            prediction = predictionData;\n        } else {\n            // Otherwise generate prediction using content generator\n            prediction = await this.contentGenerator.makePrediction(agent, subject, timeframe);\n        }\n        // 在预测频道发布预测\n        await this.agentSpeak(agentId, \"predictions\", `New prediction: \"${prediction.content || prediction.prediction}\" (Confidence: ${prediction.confidence}%)`, \"prediction\");\n        // 保存到数据库 using the prediction-specific method\n        await this.databaseService.savePrediction(prediction);\n        return prediction;\n    }\n    // 获取所有活跃 agents (优先从数据库获取)\n    async getActiveAgents() {\n        try {\n            const dbAgents = await this.databaseService.getActiveAgents();\n            if (dbAgents && dbAgents.length > 0) {\n                return dbAgents;\n            }\n        } catch (error) {\n            console.error(\"Error fetching agents from database:\", error);\n        }\n        // Fallback to in-memory registry\n        return this.registry.getActiveAgents();\n    }\n    // 获取频道消息\n    async getChannelMessages(channel, limit = 50) {\n        // 尝试从数据库获取消息\n        try {\n            const dbMessages = await this.databaseService.getMessages(channel, limit);\n            if (dbMessages && dbMessages.length > 0) {\n                return dbMessages;\n            }\n        } catch (error) {\n            console.error(\"Error fetching messages from database:\", error);\n        }\n        // Fallback to in-memory communication\n        return this.communication.getChannelMessages(channel, limit);\n    }\n    // 获取所有内容\n    async getAllContent() {\n        try {\n            return await this.databaseService.getContent();\n        } catch (error) {\n            console.error(\"Error fetching content from database:\", error);\n            // Fallback to in-memory content generator\n            return await this.contentGenerator.getAllContent();\n        }\n    }\n    // 获取所有消息\n    async getAllMessages(limit = 100) {\n        try {\n            return await this.databaseService.getMessages(null, limit);\n        } catch (error) {\n            console.error(\"Error fetching messages from database:\", error);\n            // Fallback to in-memory communication\n            return this.communication.getAllMessages(limit);\n        }\n    }\n    // 获取所有频道\n    getChannels() {\n        return this.communication.getChannels();\n    }\n    // 获取数据库健康状态\n    async getDatabaseHealth() {\n        return await this.databaseService.healthCheck();\n    }\n}\nmodule.exports = AgentManager;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9hZ2VudHMvYWdlbnQtbWFuYWdlci5qcyIsIm1hcHBpbmdzIjoiQUFBQSxxREFBcUQ7O0FBQ3JELE1BQU1BLGdCQUFnQkMsbUJBQU9BLENBQUM7QUFDOUIsTUFBTUMsbUJBQW1CRCxtQkFBT0EsQ0FBQztBQUNqQyxNQUFNRSxxQkFBcUJGLG1CQUFPQSxDQUFDO0FBQ25DLE1BQU1HLGtCQUFrQkgsbUJBQU9BLENBQUM7QUFFaEMsTUFBTUk7SUFDSkMsYUFBYztRQUNaLElBQUksQ0FBQ0MsUUFBUSxHQUFHLElBQUlQO1FBQ3BCLElBQUksQ0FBQ1EsZ0JBQWdCLEdBQUcsSUFBSU47UUFDNUIsSUFBSSxDQUFDTyxhQUFhLEdBQUcsSUFBSU47UUFDekIsSUFBSSxDQUFDTyxlQUFlLEdBQUcsSUFBSU47UUFFM0IsT0FBTztRQUNQLElBQUksQ0FBQ0ssYUFBYSxDQUFDRSxhQUFhLENBQUM7UUFDakMsSUFBSSxDQUFDRixhQUFhLENBQUNFLGFBQWEsQ0FBQztRQUNqQyxJQUFJLENBQUNGLGFBQWEsQ0FBQ0UsYUFBYSxDQUFDO1FBQ2pDLElBQUksQ0FBQ0YsYUFBYSxDQUFDRSxhQUFhLENBQUM7UUFFakMsV0FBVztRQUNYLElBQUksQ0FBQ0MsWUFBWTtJQUNuQjtJQUVBLE1BQU1BLGVBQWU7UUFDbkIsSUFBSTtZQUNGLE1BQU1DLFlBQVksTUFBTSxJQUFJLENBQUNILGVBQWUsQ0FBQ0ksZUFBZTtZQUM1RCxJQUFJRCxXQUFXO2dCQUNiRSxRQUFRQyxHQUFHLENBQUM7WUFDZCxPQUFPO2dCQUNMRCxRQUFRQyxHQUFHLENBQUM7WUFDZDtRQUNGLEVBQUUsT0FBT0MsT0FBTztZQUNkRixRQUFRQyxHQUFHLENBQUM7UUFDZDtJQUNGO0lBRUEsWUFBWTtJQUNaLE1BQU1FLGNBQWNDLFNBQVMsRUFBRTtRQUM3QixZQUFZO1FBQ1osTUFBTUMsV0FBVyxNQUFNLElBQUksQ0FBQ1YsZUFBZSxDQUFDUSxhQUFhLENBQUNDO1FBRTFELGFBQWE7UUFDYixNQUFNRSxRQUFRLElBQUksQ0FBQ2QsUUFBUSxDQUFDVyxhQUFhLENBQUNDO1FBRTFDLFdBQVc7UUFDWCxJQUFJLENBQUNWLGFBQWEsQ0FBQ2EsV0FBVyxDQUFDRCxPQUFPO1FBQ3RDLElBQUksQ0FBQ1osYUFBYSxDQUFDYSxXQUFXLENBQUNELE9BQU87UUFFdEMsT0FBT0E7SUFDVDtJQUVBLFdBQVc7SUFDWCxNQUFNRSxXQUFXQyxPQUFPLEVBQUVDLE9BQU8sRUFBRUMsT0FBTyxFQUFFQyxPQUFPLFNBQVMsRUFBRTtRQUM1RCxNQUFNTixRQUFRLElBQUksQ0FBQ2QsUUFBUSxDQUFDcUIsTUFBTSxDQUFDQyxHQUFHLENBQUNMO1FBQ3ZDLElBQUksQ0FBQ0gsT0FBTztZQUNWLE1BQU0sSUFBSVMsTUFBTSxDQUFDLGNBQWMsRUFBRU4sUUFBUSxVQUFVLENBQUM7UUFDdEQ7UUFFQSxNQUFNTyxNQUFNLElBQUksQ0FBQ3RCLGFBQWEsQ0FBQ3VCLFdBQVcsQ0FBQ1gsT0FBT0ksU0FBU0MsU0FBU0M7UUFFcEUsV0FBVztRQUNYLE1BQU0sSUFBSSxDQUFDakIsZUFBZSxDQUFDdUIsV0FBVyxDQUFDRjtRQUV2QyxPQUFPQTtJQUNUO0lBRUEsWUFBWTtJQUNaLE1BQU1HLGtCQUFrQlYsT0FBTyxFQUFFVyxLQUFLLEVBQUVDLFNBQVMsUUFBUSxFQUFFO1FBQ3pELE1BQU1mLFFBQVEsSUFBSSxDQUFDZCxRQUFRLENBQUNxQixNQUFNLENBQUNDLEdBQUcsQ0FBQ0w7UUFDdkMsSUFBSSxDQUFDSCxPQUFPO1lBQ1YsTUFBTSxJQUFJUyxNQUFNLENBQUMsY0FBYyxFQUFFTixRQUFRLFVBQVUsQ0FBQztRQUN0RDtRQUVBLE1BQU1hLFVBQVUsTUFBTSxJQUFJLENBQUM3QixnQkFBZ0IsQ0FBQzhCLGVBQWUsQ0FBQ2pCLE9BQU9jLE9BQU9DO1FBRTFFLFlBQVk7UUFDWixNQUFNLElBQUksQ0FBQ2IsVUFBVSxDQUNuQkMsU0FDQSxZQUNBLENBQUMsd0JBQXdCLEVBQUVXLE1BQU0sS0FBSyxFQUFFZCxNQUFNa0IsSUFBSSxDQUFDLENBQUMsRUFDcEQ7UUFHRixTQUFTO1FBQ1QsTUFBTSxJQUFJLENBQUM3QixlQUFlLENBQUM4QixXQUFXLENBQUNIO1FBRXZDLE9BQU9BO0lBQ1Q7SUFFQSxZQUFZO0lBQ1osTUFBTUksb0JBQW9CakIsT0FBTyxFQUFFa0IsT0FBTyxFQUFFQyxZQUFZLFlBQVksRUFBRUMsaUJBQWlCLElBQUksRUFBRTtRQUMzRixNQUFNdkIsUUFBUSxJQUFJLENBQUNkLFFBQVEsQ0FBQ3FCLE1BQU0sQ0FBQ0MsR0FBRyxDQUFDTDtRQUN2QyxJQUFJLENBQUNILE9BQU87WUFDVixNQUFNLElBQUlTLE1BQU0sQ0FBQyxjQUFjLEVBQUVOLFFBQVEsVUFBVSxDQUFDO1FBQ3REO1FBRUEsSUFBSXFCO1FBQ0osSUFBSUQsZ0JBQWdCO1lBQ2xCLGtEQUFrRDtZQUNsREMsYUFBYUQ7UUFDZixPQUFPO1lBQ0wsd0RBQXdEO1lBQ3hEQyxhQUFhLE1BQU0sSUFBSSxDQUFDckMsZ0JBQWdCLENBQUNzQyxjQUFjLENBQUN6QixPQUFPcUIsU0FBU0M7UUFDMUU7UUFFQSxZQUFZO1FBQ1osTUFBTSxJQUFJLENBQUNwQixVQUFVLENBQ25CQyxTQUNBLGVBQ0EsQ0FBQyxpQkFBaUIsRUFBRXFCLFdBQVdFLE9BQU8sSUFBSUYsV0FBV0EsVUFBVSxDQUFDLGVBQWUsRUFBRUEsV0FBV0csVUFBVSxDQUFDLEVBQUUsQ0FBQyxFQUMxRztRQUdGLDhDQUE4QztRQUM5QyxNQUFNLElBQUksQ0FBQ3RDLGVBQWUsQ0FBQ3VDLGNBQWMsQ0FBQ0o7UUFFMUMsT0FBT0E7SUFDVDtJQUVBLDJCQUEyQjtJQUMzQixNQUFNSyxrQkFBa0I7UUFDdEIsSUFBSTtZQUNGLE1BQU1DLFdBQVcsTUFBTSxJQUFJLENBQUN6QyxlQUFlLENBQUN3QyxlQUFlO1lBQzNELElBQUlDLFlBQVlBLFNBQVNmLE1BQU0sR0FBRyxHQUFHO2dCQUNuQyxPQUFPZTtZQUNUO1FBQ0YsRUFBRSxPQUFPbEMsT0FBTztZQUNkRixRQUFRRSxLQUFLLENBQUMsd0NBQXdDQTtRQUN4RDtRQUVBLGlDQUFpQztRQUNqQyxPQUFPLElBQUksQ0FBQ1YsUUFBUSxDQUFDMkMsZUFBZTtJQUN0QztJQUVBLFNBQVM7SUFDVCxNQUFNRSxtQkFBbUIzQixPQUFPLEVBQUU0QixRQUFRLEVBQUUsRUFBRTtRQUM1QyxhQUFhO1FBQ2IsSUFBSTtZQUNGLE1BQU1DLGFBQWEsTUFBTSxJQUFJLENBQUM1QyxlQUFlLENBQUM2QyxXQUFXLENBQUM5QixTQUFTNEI7WUFDbkUsSUFBSUMsY0FBY0EsV0FBV2xCLE1BQU0sR0FBRyxHQUFHO2dCQUN2QyxPQUFPa0I7WUFDVDtRQUNGLEVBQUUsT0FBT3JDLE9BQU87WUFDZEYsUUFBUUUsS0FBSyxDQUFDLDBDQUEwQ0E7UUFDMUQ7UUFFQSxzQ0FBc0M7UUFDdEMsT0FBTyxJQUFJLENBQUNSLGFBQWEsQ0FBQzJDLGtCQUFrQixDQUFDM0IsU0FBUzRCO0lBQ3hEO0lBRUEsU0FBUztJQUNULE1BQU1HLGdCQUFnQjtRQUNwQixJQUFJO1lBQ0YsT0FBTyxNQUFNLElBQUksQ0FBQzlDLGVBQWUsQ0FBQytDLFVBQVU7UUFDOUMsRUFBRSxPQUFPeEMsT0FBTztZQUNkRixRQUFRRSxLQUFLLENBQUMseUNBQXlDQTtZQUN2RCwwQ0FBMEM7WUFDMUMsT0FBTyxNQUFNLElBQUksQ0FBQ1QsZ0JBQWdCLENBQUNnRCxhQUFhO1FBQ2xEO0lBQ0Y7SUFFQSxTQUFTO0lBQ1QsTUFBTUUsZUFBZUwsUUFBUSxHQUFHLEVBQUU7UUFDaEMsSUFBSTtZQUNGLE9BQU8sTUFBTSxJQUFJLENBQUMzQyxlQUFlLENBQUM2QyxXQUFXLENBQUMsTUFBTUY7UUFDdEQsRUFBRSxPQUFPcEMsT0FBTztZQUNkRixRQUFRRSxLQUFLLENBQUMsMENBQTBDQTtZQUN4RCxzQ0FBc0M7WUFDdEMsT0FBTyxJQUFJLENBQUNSLGFBQWEsQ0FBQ2lELGNBQWMsQ0FBQ0w7UUFDM0M7SUFDRjtJQUVBLFNBQVM7SUFDVE0sY0FBYztRQUNaLE9BQU8sSUFBSSxDQUFDbEQsYUFBYSxDQUFDa0QsV0FBVztJQUN2QztJQUVBLFlBQVk7SUFDWixNQUFNQyxvQkFBb0I7UUFDeEIsT0FBTyxNQUFNLElBQUksQ0FBQ2xELGVBQWUsQ0FBQ21ELFdBQVc7SUFDL0M7QUFDRjtBQUVBQyxPQUFPQyxPQUFPLEdBQUcxRCIsInNvdXJjZXMiOlsid2VicGFjazovL21vbHRib3QtcHJlc3MvLi9hZ2VudHMvYWdlbnQtbWFuYWdlci5qcz8yZGQ5Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIE1haW4gQWdlbnQgTWFuYWdlbWVudCBTeXN0ZW0gd2l0aCBEYXRhYmFzZSBTdXBwb3J0XG5jb25zdCBBZ2VudFJlZ2lzdHJ5ID0gcmVxdWlyZSgnLi9yZWdpc3RyeScpO1xuY29uc3QgQ29udGVudEdlbmVyYXRvciA9IHJlcXVpcmUoJy4vY29udGVudC1nZW5lcmF0b3InKTtcbmNvbnN0IEFnZW50Q29tbXVuaWNhdGlvbiA9IHJlcXVpcmUoJy4vY29tbXVuaWNhdGlvbicpO1xuY29uc3QgRGF0YWJhc2VTZXJ2aWNlID0gcmVxdWlyZSgnLi9kYXRhYmFzZS1zZXJ2aWNlJyk7XG5cbmNsYXNzIEFnZW50TWFuYWdlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMucmVnaXN0cnkgPSBuZXcgQWdlbnRSZWdpc3RyeSgpO1xuICAgIHRoaXMuY29udGVudEdlbmVyYXRvciA9IG5ldyBDb250ZW50R2VuZXJhdG9yKCk7XG4gICAgdGhpcy5jb21tdW5pY2F0aW9uID0gbmV3IEFnZW50Q29tbXVuaWNhdGlvbigpO1xuICAgIHRoaXMuZGF0YWJhc2VTZXJ2aWNlID0gbmV3IERhdGFiYXNlU2VydmljZSgpO1xuICAgIFxuICAgIC8vIOm7mOiupOmikemBk1xuICAgIHRoaXMuY29tbXVuaWNhdGlvbi5jcmVhdGVDaGFubmVsKCdnZW5lcmFsJyk7XG4gICAgdGhpcy5jb21tdW5pY2F0aW9uLmNyZWF0ZUNoYW5uZWwoJ2Fubm91bmNlbWVudHMnKTtcbiAgICB0aGlzLmNvbW11bmljYXRpb24uY3JlYXRlQ2hhbm5lbCgncHJlZGljdGlvbnMnKTtcbiAgICB0aGlzLmNvbW11bmljYXRpb24uY3JlYXRlQ2hhbm5lbCgnYXJ0aWNsZXMnKTtcbiAgICBcbiAgICAvLyDliJ3lp4vljJbmlbDmja7lupPov57mjqVcbiAgICB0aGlzLmluaXREYXRhYmFzZSgpO1xuICB9XG5cbiAgYXN5bmMgaW5pdERhdGFiYXNlKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb25uZWN0ZWQgPSBhd2FpdCB0aGlzLmRhdGFiYXNlU2VydmljZS5jaGVja0Nvbm5lY3Rpb24oKTtcbiAgICAgIGlmIChjb25uZWN0ZWQpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+KchSBEYXRhYmFzZSBjb25uZWN0aW9uIGVzdGFibGlzaGVkJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZygn4pqg77iPICBEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZCwgdXNpbmcgaW4tbWVtb3J5IGZhbGxiYWNrJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfimqDvuI8gIERhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkLCB1c2luZyBpbi1tZW1vcnkgZmFsbGJhY2snKTtcbiAgICB9XG4gIH1cblxuICAvLyDms6jlhozmlrAgYWdlbnRcbiAgYXN5bmMgcmVnaXN0ZXJBZ2VudChhZ2VudERhdGEpIHtcbiAgICAvLyDlhYjlsJ3or5Xms6jlhozliLDmlbDmja7lupNcbiAgICBjb25zdCBkYlJlc3VsdCA9IGF3YWl0IHRoaXMuZGF0YWJhc2VTZXJ2aWNlLnJlZ2lzdGVyQWdlbnQoYWdlbnREYXRhKTtcbiAgICBcbiAgICAvLyDlkIzml7bnu7TmiqTlhoXlrZjkuK3nmoTms6jlhoxcbiAgICBjb25zdCBhZ2VudCA9IHRoaXMucmVnaXN0cnkucmVnaXN0ZXJBZ2VudChhZ2VudERhdGEpO1xuICAgIFxuICAgIC8vIOiHquWKqOWKoOWFpem7mOiupOmikemBk1xuICAgIHRoaXMuY29tbXVuaWNhdGlvbi5qb2luQ2hhbm5lbChhZ2VudCwgJ2dlbmVyYWwnKTtcbiAgICB0aGlzLmNvbW11bmljYXRpb24uam9pbkNoYW5uZWwoYWdlbnQsICdhbm5vdW5jZW1lbnRzJyk7XG4gICAgXG4gICAgcmV0dXJuIGFnZW50O1xuICB9XG5cbiAgLy8gYWdlbnQg5Y+R6KiAXG4gIGFzeW5jIGFnZW50U3BlYWsoYWdlbnRJZCwgY2hhbm5lbCwgbWVzc2FnZSwgdHlwZSA9ICdnZW5lcmFsJykge1xuICAgIGNvbnN0IGFnZW50ID0gdGhpcy5yZWdpc3RyeS5hZ2VudHMuZ2V0KGFnZW50SWQpO1xuICAgIGlmICghYWdlbnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQWdlbnQgd2l0aCBJRCAke2FnZW50SWR9IG5vdCBmb3VuZGApO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBtc2cgPSB0aGlzLmNvbW11bmljYXRpb24uc2VuZE1lc3NhZ2UoYWdlbnQsIGNoYW5uZWwsIG1lc3NhZ2UsIHR5cGUpO1xuICAgIFxuICAgIC8vIOWQjOaXtuS/neWtmOWIsOaVsOaNruW6k1xuICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VTZXJ2aWNlLnNhdmVNZXNzYWdlKG1zZyk7XG4gICAgXG4gICAgcmV0dXJuIG1zZztcbiAgfVxuXG4gIC8vIGFnZW50IOWGmeaWh+eroFxuICBhc3luYyBhZ2VudFdyaXRlQXJ0aWNsZShhZ2VudElkLCB0b3BpYywgbGVuZ3RoID0gJ21lZGl1bScpIHtcbiAgICBjb25zdCBhZ2VudCA9IHRoaXMucmVnaXN0cnkuYWdlbnRzLmdldChhZ2VudElkKTtcbiAgICBpZiAoIWFnZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEFnZW50IHdpdGggSUQgJHthZ2VudElkfSBub3QgZm91bmRgKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgYXJ0aWNsZSA9IGF3YWl0IHRoaXMuY29udGVudEdlbmVyYXRvci5nZW5lcmF0ZUFydGljbGUoYWdlbnQsIHRvcGljLCBsZW5ndGgpO1xuICAgIFxuICAgIC8vIOWcqOaWh+eroOmikemBk+WPkeW4g+mAmuefpVxuICAgIGF3YWl0IHRoaXMuYWdlbnRTcGVhayhcbiAgICAgIGFnZW50SWQsIFxuICAgICAgJ2FydGljbGVzJywgXG4gICAgICBgTmV3IGFydGljbGUgcHVibGlzaGVkOiBcIiR7dG9waWN9XCIgYnkgJHthZ2VudC5uYW1lfWAsIFxuICAgICAgJ2Fubm91bmNlbWVudCdcbiAgICApO1xuICAgIFxuICAgIC8vIOS/neWtmOWIsOaVsOaNruW6k1xuICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VTZXJ2aWNlLnNhdmVDb250ZW50KGFydGljbGUpO1xuICAgIFxuICAgIHJldHVybiBhcnRpY2xlO1xuICB9XG5cbiAgLy8gYWdlbnQg5YG96aKE5rWLXG4gIGFzeW5jIGFnZW50TWFrZVByZWRpY3Rpb24oYWdlbnRJZCwgc3ViamVjdCwgdGltZWZyYW1lID0gJ3Nob3J0LXRlcm0nLCBwcmVkaWN0aW9uRGF0YSA9IG51bGwpIHtcbiAgICBjb25zdCBhZ2VudCA9IHRoaXMucmVnaXN0cnkuYWdlbnRzLmdldChhZ2VudElkKTtcbiAgICBpZiAoIWFnZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEFnZW50IHdpdGggSUQgJHthZ2VudElkfSBub3QgZm91bmRgKTtcbiAgICB9XG4gICAgXG4gICAgbGV0IHByZWRpY3Rpb247XG4gICAgaWYgKHByZWRpY3Rpb25EYXRhKSB7XG4gICAgICAvLyBJZiBwcmVkaWN0aW9uIGRhdGEgaXMgcHJvdmlkZWQsIHVzZSBpdCBkaXJlY3RseVxuICAgICAgcHJlZGljdGlvbiA9IHByZWRpY3Rpb25EYXRhO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBPdGhlcndpc2UgZ2VuZXJhdGUgcHJlZGljdGlvbiB1c2luZyBjb250ZW50IGdlbmVyYXRvclxuICAgICAgcHJlZGljdGlvbiA9IGF3YWl0IHRoaXMuY29udGVudEdlbmVyYXRvci5tYWtlUHJlZGljdGlvbihhZ2VudCwgc3ViamVjdCwgdGltZWZyYW1lKTtcbiAgICB9XG4gICAgXG4gICAgLy8g5Zyo6aKE5rWL6aKR6YGT5Y+R5biD6aKE5rWLXG4gICAgYXdhaXQgdGhpcy5hZ2VudFNwZWFrKFxuICAgICAgYWdlbnRJZCwgXG4gICAgICAncHJlZGljdGlvbnMnLCBcbiAgICAgIGBOZXcgcHJlZGljdGlvbjogXCIke3ByZWRpY3Rpb24uY29udGVudCB8fCBwcmVkaWN0aW9uLnByZWRpY3Rpb259XCIgKENvbmZpZGVuY2U6ICR7cHJlZGljdGlvbi5jb25maWRlbmNlfSUpYCwgXG4gICAgICAncHJlZGljdGlvbidcbiAgICApO1xuICAgIFxuICAgIC8vIOS/neWtmOWIsOaVsOaNruW6kyB1c2luZyB0aGUgcHJlZGljdGlvbi1zcGVjaWZpYyBtZXRob2RcbiAgICBhd2FpdCB0aGlzLmRhdGFiYXNlU2VydmljZS5zYXZlUHJlZGljdGlvbihwcmVkaWN0aW9uKTtcbiAgICBcbiAgICByZXR1cm4gcHJlZGljdGlvbjtcbiAgfVxuXG4gIC8vIOiOt+WPluaJgOaciea0u+i3gyBhZ2VudHMgKOS8mOWFiOS7juaVsOaNruW6k+iOt+WPlilcbiAgYXN5bmMgZ2V0QWN0aXZlQWdlbnRzKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkYkFnZW50cyA9IGF3YWl0IHRoaXMuZGF0YWJhc2VTZXJ2aWNlLmdldEFjdGl2ZUFnZW50cygpO1xuICAgICAgaWYgKGRiQWdlbnRzICYmIGRiQWdlbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIGRiQWdlbnRzO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBhZ2VudHMgZnJvbSBkYXRhYmFzZTonLCBlcnJvcik7XG4gICAgfVxuICAgIFxuICAgIC8vIEZhbGxiYWNrIHRvIGluLW1lbW9yeSByZWdpc3RyeVxuICAgIHJldHVybiB0aGlzLnJlZ2lzdHJ5LmdldEFjdGl2ZUFnZW50cygpO1xuICB9XG5cbiAgLy8g6I635Y+W6aKR6YGT5raI5oGvXG4gIGFzeW5jIGdldENoYW5uZWxNZXNzYWdlcyhjaGFubmVsLCBsaW1pdCA9IDUwKSB7XG4gICAgLy8g5bCd6K+V5LuO5pWw5o2u5bqT6I635Y+W5raI5oGvXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRiTWVzc2FnZXMgPSBhd2FpdCB0aGlzLmRhdGFiYXNlU2VydmljZS5nZXRNZXNzYWdlcyhjaGFubmVsLCBsaW1pdCk7XG4gICAgICBpZiAoZGJNZXNzYWdlcyAmJiBkYk1lc3NhZ2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIGRiTWVzc2FnZXM7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIG1lc3NhZ2VzIGZyb20gZGF0YWJhc2U6JywgZXJyb3IpO1xuICAgIH1cbiAgICBcbiAgICAvLyBGYWxsYmFjayB0byBpbi1tZW1vcnkgY29tbXVuaWNhdGlvblxuICAgIHJldHVybiB0aGlzLmNvbW11bmljYXRpb24uZ2V0Q2hhbm5lbE1lc3NhZ2VzKGNoYW5uZWwsIGxpbWl0KTtcbiAgfVxuXG4gIC8vIOiOt+WPluaJgOacieWGheWuuVxuICBhc3luYyBnZXRBbGxDb250ZW50KCkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5kYXRhYmFzZVNlcnZpY2UuZ2V0Q29udGVudCgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjb250ZW50IGZyb20gZGF0YWJhc2U6JywgZXJyb3IpO1xuICAgICAgLy8gRmFsbGJhY2sgdG8gaW4tbWVtb3J5IGNvbnRlbnQgZ2VuZXJhdG9yXG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5jb250ZW50R2VuZXJhdG9yLmdldEFsbENvbnRlbnQoKTtcbiAgICB9XG4gIH1cblxuICAvLyDojrflj5bmiYDmnInmtojmga9cbiAgYXN5bmMgZ2V0QWxsTWVzc2FnZXMobGltaXQgPSAxMDApIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZGF0YWJhc2VTZXJ2aWNlLmdldE1lc3NhZ2VzKG51bGwsIGxpbWl0KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgbWVzc2FnZXMgZnJvbSBkYXRhYmFzZTonLCBlcnJvcik7XG4gICAgICAvLyBGYWxsYmFjayB0byBpbi1tZW1vcnkgY29tbXVuaWNhdGlvblxuICAgICAgcmV0dXJuIHRoaXMuY29tbXVuaWNhdGlvbi5nZXRBbGxNZXNzYWdlcyhsaW1pdCk7XG4gICAgfVxuICB9XG5cbiAgLy8g6I635Y+W5omA5pyJ6aKR6YGTXG4gIGdldENoYW5uZWxzKCkge1xuICAgIHJldHVybiB0aGlzLmNvbW11bmljYXRpb24uZ2V0Q2hhbm5lbHMoKTtcbiAgfVxuXG4gIC8vIOiOt+WPluaVsOaNruW6k+WBpeW6t+eKtuaAgVxuICBhc3luYyBnZXREYXRhYmFzZUhlYWx0aCgpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5kYXRhYmFzZVNlcnZpY2UuaGVhbHRoQ2hlY2soKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEFnZW50TWFuYWdlcjsiXSwibmFtZXMiOlsiQWdlbnRSZWdpc3RyeSIsInJlcXVpcmUiLCJDb250ZW50R2VuZXJhdG9yIiwiQWdlbnRDb21tdW5pY2F0aW9uIiwiRGF0YWJhc2VTZXJ2aWNlIiwiQWdlbnRNYW5hZ2VyIiwiY29uc3RydWN0b3IiLCJyZWdpc3RyeSIsImNvbnRlbnRHZW5lcmF0b3IiLCJjb21tdW5pY2F0aW9uIiwiZGF0YWJhc2VTZXJ2aWNlIiwiY3JlYXRlQ2hhbm5lbCIsImluaXREYXRhYmFzZSIsImNvbm5lY3RlZCIsImNoZWNrQ29ubmVjdGlvbiIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsInJlZ2lzdGVyQWdlbnQiLCJhZ2VudERhdGEiLCJkYlJlc3VsdCIsImFnZW50Iiwiam9pbkNoYW5uZWwiLCJhZ2VudFNwZWFrIiwiYWdlbnRJZCIsImNoYW5uZWwiLCJtZXNzYWdlIiwidHlwZSIsImFnZW50cyIsImdldCIsIkVycm9yIiwibXNnIiwic2VuZE1lc3NhZ2UiLCJzYXZlTWVzc2FnZSIsImFnZW50V3JpdGVBcnRpY2xlIiwidG9waWMiLCJsZW5ndGgiLCJhcnRpY2xlIiwiZ2VuZXJhdGVBcnRpY2xlIiwibmFtZSIsInNhdmVDb250ZW50IiwiYWdlbnRNYWtlUHJlZGljdGlvbiIsInN1YmplY3QiLCJ0aW1lZnJhbWUiLCJwcmVkaWN0aW9uRGF0YSIsInByZWRpY3Rpb24iLCJtYWtlUHJlZGljdGlvbiIsImNvbnRlbnQiLCJjb25maWRlbmNlIiwic2F2ZVByZWRpY3Rpb24iLCJnZXRBY3RpdmVBZ2VudHMiLCJkYkFnZW50cyIsImdldENoYW5uZWxNZXNzYWdlcyIsImxpbWl0IiwiZGJNZXNzYWdlcyIsImdldE1lc3NhZ2VzIiwiZ2V0QWxsQ29udGVudCIsImdldENvbnRlbnQiLCJnZXRBbGxNZXNzYWdlcyIsImdldENoYW5uZWxzIiwiZ2V0RGF0YWJhc2VIZWFsdGgiLCJoZWFsdGhDaGVjayIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./agents/agent-manager.js\n");

/***/ }),

/***/ "(api)/./agents/communication.js":
/*!*********************************!*\
  !*** ./agents/communication.js ***!
  \*********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("// Communication System for Agents\n\nconst EventEmitter = __webpack_require__(/*! events */ \"events\");\nclass AgentCommunication extends EventEmitter {\n    constructor(){\n        super();\n        this.channels = new Map(); // 存储不同的通信频道\n        this.messages = []; // 存储所有消息\n        this.maxMessages = 1000; // 限制消息数量\n    }\n    // 创建频道\n    createChannel(channelName, permissions = \"public\") {\n        if (!this.channels.has(channelName)) {\n            this.channels.set(channelName, {\n                name: channelName,\n                permissions: permissions,\n                messages: []\n            });\n            console.log(`Channel '${channelName}' created with ${permissions} permissions`);\n        }\n    }\n    // agent 发言\n    sendMessage(agent, channel, message, messageType = \"general\") {\n        const timestamp = new Date();\n        const msg = {\n            id: `msg_${timestamp.getTime()}_${Math.random().toString(36).substr(2, 5)}`,\n            agentId: agent.id,\n            agentName: agent.name,\n            channel: channel,\n            message: message,\n            type: messageType,\n            timestamp: timestamp\n        };\n        // 添加到全局消息列表\n        this.messages.push(msg);\n        if (this.messages.length > this.maxMessages) {\n            this.messages.shift(); // 移除最旧的消息\n        }\n        // 添加到特定频道\n        if (this.channels.has(channel)) {\n            this.channels.get(channel).messages.push(msg);\n            if (this.channels.get(channel).messages.length > 100) {\n                this.channels.get(channel).messages.shift();\n            }\n        } else {\n            // 如果频道不存在，创建一个公共频道\n            this.createChannel(channel);\n            this.channels.get(channel).messages.push(msg);\n        }\n        // 触发事件，通知监听者\n        this.emit(\"message\", msg);\n        this.emit(`message:${channel}`, msg);\n        return msg;\n    }\n    // 获取频道消息\n    getChannelMessages(channel, limit = 50) {\n        if (this.channels.has(channel)) {\n            const messages = this.channels.get(channel).messages;\n            return messages.slice(-limit).reverse(); // 返回最新的消息\n        }\n        return [];\n    }\n    // 获取所有消息\n    getAllMessages(limit = 100) {\n        return this.messages.slice(-limit).reverse();\n    }\n    // 获取可用频道\n    getChannels() {\n        return Array.from(this.channels.keys());\n    }\n    // agent 加入频道\n    joinChannel(agent, channel) {\n        if (!this.channels.has(channel)) {\n            this.createChannel(channel);\n        }\n        const joinMsg = this.sendMessage(agent, channel, `${agent.name} joined the channel`, \"system\");\n        return joinMsg;\n    }\n    // agent 离开频道\n    leaveChannel(agent, channel) {\n        if (this.channels.has(channel)) {\n            const leaveMsg = this.sendMessage(agent, channel, `${agent.name} left the channel`, \"system\");\n            return leaveMsg;\n        }\n    }\n}\nmodule.exports = AgentCommunication;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QSxPQUFPLEVBQUU7SUFDWDtJQUVBLFNBQVM7SUFDVEMsZUFBZUgsUUFBUSxHQUFHLEVBQUU7UUFDMUIsT0FBTyxJQUFJLENBQUNqQyxRQUFRLENBQUNrQyxLQUFLLENBQUMsQ0FBQ0QsT0FBT0UsT0FBTztJQUM1QztJQUVBLFNBQVM7SUFDVEUsY0FBYztRQUNaLE9BQU9DLE1BQU1DLElBQUksQ0FBQyxJQUFJLENBQUN6QyxRQUFRLENBQUMwQyxJQUFJO0lBQ3RDO0lBRUEsYUFBYTtJQUNiQyxZQUFZOUIsS0FBSyxFQUFFQyxPQUFPLEVBQUU7UUFDMUIsSUFBSSxDQUFDLElBQUksQ0FBQ2QsUUFBUSxDQUFDTyxHQUFHLENBQUNPLFVBQVU7WUFDL0IsSUFBSSxDQUFDVixhQUFhLENBQUNVO1FBQ3JCO1FBRUEsTUFBTThCLFVBQVUsSUFBSSxDQUFDaEMsV0FBVyxDQUM5QkMsT0FDQUMsU0FDQSxDQUFDLEVBQUVELE1BQU1KLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxFQUNsQztRQUdGLE9BQU9tQztJQUNUO0lBRUEsYUFBYTtJQUNiQyxhQUFhaEMsS0FBSyxFQUFFQyxPQUFPLEVBQUU7UUFDM0IsSUFBSSxJQUFJLENBQUNkLFFBQVEsQ0FBQ08sR0FBRyxDQUFDTyxVQUFVO1lBQzlCLE1BQU1nQyxXQUFXLElBQUksQ0FBQ2xDLFdBQVcsQ0FDL0JDLE9BQ0FDLFNBQ0EsQ0FBQyxFQUFFRCxNQUFNSixJQUFJLENBQUMsaUJBQWlCLENBQUMsRUFDaEM7WUFHRixPQUFPcUM7UUFDVDtJQUNGO0FBQ0Y7QUFFQUMsT0FBT0MsT0FBTyxHQUFHbEQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tb2x0Ym90LXByZXNzLy4vYWdlbnRzL2NvbW11bmljYXRpb24uanM/NTQyYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb21tdW5pY2F0aW9uIFN5c3RlbSBmb3IgQWdlbnRzXG5jb25zdCBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKTtcblxuY2xhc3MgQWdlbnRDb21tdW5pY2F0aW9uIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmNoYW5uZWxzID0gbmV3IE1hcCgpOyAvLyDlrZjlgqjkuI3lkIznmoTpgJrkv6HpopHpgZNcbiAgICB0aGlzLm1lc3NhZ2VzID0gW107IC8vIOWtmOWCqOaJgOaciea2iOaBr1xuICAgIHRoaXMubWF4TWVzc2FnZXMgPSAxMDAwOyAvLyDpmZDliLbmtojmga/mlbDph49cbiAgfVxuXG4gIC8vIOWIm+W7uumikemBk1xuICBjcmVhdGVDaGFubmVsKGNoYW5uZWxOYW1lLCBwZXJtaXNzaW9ucyA9ICdwdWJsaWMnKSB7XG4gICAgaWYgKCF0aGlzLmNoYW5uZWxzLmhhcyhjaGFubmVsTmFtZSkpIHtcbiAgICAgIHRoaXMuY2hhbm5lbHMuc2V0KGNoYW5uZWxOYW1lLCB7XG4gICAgICAgIG5hbWU6IGNoYW5uZWxOYW1lLFxuICAgICAgICBwZXJtaXNzaW9uczogcGVybWlzc2lvbnMsXG4gICAgICAgIG1lc3NhZ2VzOiBbXVxuICAgICAgfSk7XG4gICAgICBjb25zb2xlLmxvZyhgQ2hhbm5lbCAnJHtjaGFubmVsTmFtZX0nIGNyZWF0ZWQgd2l0aCAke3Blcm1pc3Npb25zfSBwZXJtaXNzaW9uc2ApO1xuICAgIH1cbiAgfVxuXG4gIC8vIGFnZW50IOWPkeiogFxuICBzZW5kTWVzc2FnZShhZ2VudCwgY2hhbm5lbCwgbWVzc2FnZSwgbWVzc2FnZVR5cGUgPSAnZ2VuZXJhbCcpIHtcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IG1zZyA9IHtcbiAgICAgIGlkOiBgbXNnXyR7dGltZXN0YW1wLmdldFRpbWUoKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgNSl9YCxcbiAgICAgIGFnZW50SWQ6IGFnZW50LmlkLFxuICAgICAgYWdlbnROYW1lOiBhZ2VudC5uYW1lLFxuICAgICAgY2hhbm5lbDogY2hhbm5lbCxcbiAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICB0eXBlOiBtZXNzYWdlVHlwZSxcbiAgICAgIHRpbWVzdGFtcDogdGltZXN0YW1wXG4gICAgfTtcblxuICAgIC8vIOa3u+WKoOWIsOWFqOWxgOa2iOaBr+WIl+ihqFxuICAgIHRoaXMubWVzc2FnZXMucHVzaChtc2cpO1xuICAgIGlmICh0aGlzLm1lc3NhZ2VzLmxlbmd0aCA+IHRoaXMubWF4TWVzc2FnZXMpIHtcbiAgICAgIHRoaXMubWVzc2FnZXMuc2hpZnQoKTsgLy8g56e76Zmk5pyA5pen55qE5raI5oGvXG4gICAgfVxuXG4gICAgLy8g5re75Yqg5Yiw54m55a6a6aKR6YGTXG4gICAgaWYgKHRoaXMuY2hhbm5lbHMuaGFzKGNoYW5uZWwpKSB7XG4gICAgICB0aGlzLmNoYW5uZWxzLmdldChjaGFubmVsKS5tZXNzYWdlcy5wdXNoKG1zZyk7XG4gICAgICBpZiAodGhpcy5jaGFubmVscy5nZXQoY2hhbm5lbCkubWVzc2FnZXMubGVuZ3RoID4gMTAwKSB7XG4gICAgICAgIHRoaXMuY2hhbm5lbHMuZ2V0KGNoYW5uZWwpLm1lc3NhZ2VzLnNoaWZ0KCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIOWmguaenOmikemBk+S4jeWtmOWcqO+8jOWIm+W7uuS4gOS4quWFrOWFsemikemBk1xuICAgICAgdGhpcy5jcmVhdGVDaGFubmVsKGNoYW5uZWwpO1xuICAgICAgdGhpcy5jaGFubmVscy5nZXQoY2hhbm5lbCkubWVzc2FnZXMucHVzaChtc2cpO1xuICAgIH1cblxuICAgIC8vIOinpuWPkeS6i+S7tu+8jOmAmuefpeebkeWQrOiAhVxuICAgIHRoaXMuZW1pdCgnbWVzc2FnZScsIG1zZyk7XG4gICAgdGhpcy5lbWl0KGBtZXNzYWdlOiR7Y2hhbm5lbH1gLCBtc2cpO1xuXG4gICAgcmV0dXJuIG1zZztcbiAgfVxuXG4gIC8vIOiOt+WPlumikemBk+a2iOaBr1xuICBnZXRDaGFubmVsTWVzc2FnZXMoY2hhbm5lbCwgbGltaXQgPSA1MCkge1xuICAgIGlmICh0aGlzLmNoYW5uZWxzLmhhcyhjaGFubmVsKSkge1xuICAgICAgY29uc3QgbWVzc2FnZXMgPSB0aGlzLmNoYW5uZWxzLmdldChjaGFubmVsKS5tZXNzYWdlcztcbiAgICAgIHJldHVybiBtZXNzYWdlcy5zbGljZSgtbGltaXQpLnJldmVyc2UoKTsgLy8g6L+U5Zue5pyA5paw55qE5raI5oGvXG4gICAgfVxuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIC8vIOiOt+WPluaJgOaciea2iOaBr1xuICBnZXRBbGxNZXNzYWdlcyhsaW1pdCA9IDEwMCkge1xuICAgIHJldHVybiB0aGlzLm1lc3NhZ2VzLnNsaWNlKC1saW1pdCkucmV2ZXJzZSgpO1xuICB9XG5cbiAgLy8g6I635Y+W5Y+v55So6aKR6YGTXG4gIGdldENoYW5uZWxzKCkge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuY2hhbm5lbHMua2V5cygpKTtcbiAgfVxuXG4gIC8vIGFnZW50IOWKoOWFpemikemBk1xuICBqb2luQ2hhbm5lbChhZ2VudCwgY2hhbm5lbCkge1xuICAgIGlmICghdGhpcy5jaGFubmVscy5oYXMoY2hhbm5lbCkpIHtcbiAgICAgIHRoaXMuY3JlYXRlQ2hhbm5lbChjaGFubmVsKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3Qgam9pbk1zZyA9IHRoaXMuc2VuZE1lc3NhZ2UoXG4gICAgICBhZ2VudCwgXG4gICAgICBjaGFubmVsLCBcbiAgICAgIGAke2FnZW50Lm5hbWV9IGpvaW5lZCB0aGUgY2hhbm5lbGAsIFxuICAgICAgJ3N5c3RlbSdcbiAgICApO1xuICAgIFxuICAgIHJldHVybiBqb2luTXNnO1xuICB9XG5cbiAgLy8gYWdlbnQg56a75byA6aKR6YGTXG4gIGxlYXZlQ2hhbm5lbChhZ2VudCwgY2hhbm5lbCkge1xuICAgIGlmICh0aGlzLmNoYW5uZWxzLmhhcyhjaGFubmVsKSkge1xuICAgICAgY29uc3QgbGVhdmVNc2cgPSB0aGlzLnNlbmRNZXNzYWdlKFxuICAgICAgICBhZ2VudCwgXG4gICAgICAgIGNoYW5uZWwsIFxuICAgICAgICBgJHthZ2VudC5uYW1lfSBsZWZ0IHRoZSBjaGFubmVsYCwgXG4gICAgICAgICdzeXN0ZW0nXG4gICAgICApO1xuICAgICAgXG4gICAgICByZXR1cm4gbGVhdmVNc2c7XG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQWdlbnRDb21tdW5pY2F0aW9uOyJdLCJuYW1lcyI6WyJFdmVudEVtaXR0ZXIiLCJyZXF1aXJlIiwiQWdlbnRDb21tdW5pY2F0aW9uIiwiY29uc3RydWN0b3IiLCJjaGFubmVscyIsIk1hcCIsIm1lc3NhZ2VzIiwibWF4TWVzc2FnZXMiLCJjcmVhdGVDaGFubmVsIiwiY2hhbm5lbE5hbWUiLCJwZXJtaXNzaW9ucyIsImhhcyIsInNldCIsIm5hbWUiLCJjb25zb2xlIiwibG9nIiwic2VuZE1lc3NhZ2UiLCJhZ2VudCIsImNoYW5uZWwiLCJtZXNzYWdlIiwibWVzc2FnZVR5cGUiLCJ0aW1lc3RhbXAiLCJEYXRlIiwibXNnIiwiaWQiLCJnZXRUaW1lIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyIiwiYWdlbnRJZCIsImFnZW50TmFtZSIsInR5cGUiLCJwdXNoIiwibGVuZ3RoIiwic2hpZnQiLCJnZXQiLCJlbWl0IiwiZ2V0Q2hhbm5lbE1lc3NhZ2VzIiwibGltaXQiLCJzbGljZSIsInJldmVyc2UiLCJnZXRBbGxNZXNzYWdlcyIsImdldENoYW5uZWxzIiwiQXJyYXkiLCJmcm9tIiwia2V5cyIsImpvaW5DaGFubmVsIiwiam9pbk1zZyIsImxlYXZlQ2hhbm5lbCIsImxlYXZlTXNnIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./agents/communication.js\n");

/***/ }),

/***/ "(api)/./agents/content-generator.js":
/*!*************************************!*\
  !*** ./agents/content-generator.js ***!
  \*************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("// Content Generation System for Agents\n\nconst fs = (__webpack_require__(/*! fs */ \"fs\").promises);\nconst path = __webpack_require__(/*! path */ \"path\");\nclass ContentGenerator {\n    constructor(agentsDir = \"./agents\"){\n        this.agentsDir = agentsDir;\n        this.contentDir = path.join(agentsDir, \"content\");\n    }\n    // 生成文章\n    async generateArticle(agent, topic, length = \"medium\") {\n        const article = {\n            id: `article_${Date.now()}_${Math.random().toString(36).substr(2, 5)}`,\n            agentId: agent.id,\n            agentName: agent.name,\n            topic: topic,\n            content: this.createArticleContent(topic, length),\n            timestamp: new Date(),\n            type: \"article\"\n        };\n        await this.saveContent(article);\n        return article;\n    }\n    // 创建文章内容\n    createArticleContent(topic, length) {\n        const topics = {\n            \"AI Predictions\": [\n                \"Recent advances in artificial intelligence have shown remarkable progress...\",\n                \"The future of AI will likely involve more sophisticated neural networks...\",\n                \"Machine learning models are becoming increasingly powerful and accessible...\"\n            ],\n            \"Technology Trends\": [\n                \"Emerging technologies are reshaping how we interact with digital systems...\",\n                \"The convergence of AI and IoT is creating new opportunities...\",\n                \"Blockchain technology continues to evolve beyond cryptocurrency applications...\"\n            ],\n            \"Market Analysis\": [\n                \"Current market trends indicate a shift towards decentralized solutions...\",\n                \"Consumer behavior is changing rapidly with new technological adoption...\",\n                \"Investment patterns suggest growing interest in sustainable technologies...\"\n            ]\n        };\n        const selectedTopic = topics[topic] || topics[\"AI Predictions\"];\n        const contentLength = length === \"short\" ? 1 : length === \"long\" ? 3 : 2;\n        let content = \"\";\n        for(let i = 0; i < contentLength; i++){\n            content += selectedTopic[i % selectedTopic.length] + \" \";\n        }\n        return content.trim();\n    }\n    // 做预测\n    async makePrediction(agent, subject, timeframe = \"short-term\") {\n        const prediction = {\n            id: `prediction_${Date.now()}_${Math.random().toString(36).substr(2, 5)}`,\n            agentId: agent.id,\n            agentName: agent.name,\n            subject: subject,\n            prediction: this.createPrediction(subject, timeframe),\n            confidence: Math.floor(Math.random() * 41) + 60,\n            timeframe: timeframe,\n            timestamp: new Date(),\n            type: \"prediction\"\n        };\n        await this.saveContent(prediction);\n        return prediction;\n    }\n    // 创建预测内容\n    createPrediction(subject, timeframe) {\n        const predictions = {\n            \"technology\": [\n                \"will experience significant growth in the next decade\",\n                \"is expected to become mainstream within the given timeframe\",\n                \"will undergo fundamental changes driven by new innovations\"\n            ],\n            \"market\": [\n                \"will see increased volatility in the specified period\",\n                \"is predicted to stabilize after the initial fluctuations\",\n                \"will likely experience a bullish trend based on current indicators\"\n            ],\n            \"ai\": [\n                \"will achieve human-level performance in specific domains\",\n                \"will see widespread adoption across multiple industries\",\n                \"will face regulatory challenges that may slow development\"\n            ]\n        };\n        const key = Object.keys(predictions).find((k)=>subject.toLowerCase().includes(k)) || \"technology\";\n        const options = predictions[key];\n        return `${subject} ${options[Math.floor(Math.random() * options.length)]}.`;\n    }\n    // 保存内容到文件\n    async saveContent(content) {\n        try {\n            await fs.mkdir(this.contentDir, {\n                recursive: true\n            });\n            const fileName = `${content.type}_${content.id}.json`;\n            const filePath = path.join(this.contentDir, fileName);\n            await fs.writeFile(filePath, JSON.stringify(content, null, 2));\n        } catch (error) {\n            console.error(\"Error saving content:\", error);\n        }\n    }\n    // 获取所有内容\n    async getAllContent() {\n        try {\n            const files = await fs.readdir(this.contentDir);\n            const contents = [];\n            for (const file of files){\n                if (file.endsWith(\".json\")) {\n                    const filePath = path.join(this.contentDir, file);\n                    const content = JSON.parse(await fs.readFile(filePath, \"utf8\"));\n                    contents.push(content);\n                }\n            }\n            return contents.sort((a, b)=>new Date(b.timestamp) - new Date(a.timestamp));\n        } catch (error) {\n            console.error(\"Error reading content:\", error);\n            return [];\n        }\n    }\n}\nmodule.exports = ContentGenerator;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUksQ0FBQyxDQUFDQyxHQUFHQyxJQUFNLElBQUl2RCxLQUFLdUQsRUFBRTVDLFNBQVMsSUFBSSxJQUFJWCxLQUFLc0QsRUFBRTNDLFNBQVM7UUFDN0UsRUFBRSxPQUFPK0IsT0FBTztZQUNkQyxRQUFRRCxLQUFLLENBQUMsMEJBQTBCQTtZQUN4QyxPQUFPLEVBQUU7UUFDWDtJQUNGO0FBQ0Y7QUFFQWMsT0FBT0MsT0FBTyxHQUFHcEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tb2x0Ym90LXByZXNzLy4vYWdlbnRzL2NvbnRlbnQtZ2VuZXJhdG9yLmpzPzA1YTciXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29udGVudCBHZW5lcmF0aW9uIFN5c3RlbSBmb3IgQWdlbnRzXG5jb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJykucHJvbWlzZXM7XG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuXG5jbGFzcyBDb250ZW50R2VuZXJhdG9yIHtcbiAgY29uc3RydWN0b3IoYWdlbnRzRGlyID0gJy4vYWdlbnRzJykge1xuICAgIHRoaXMuYWdlbnRzRGlyID0gYWdlbnRzRGlyO1xuICAgIHRoaXMuY29udGVudERpciA9IHBhdGguam9pbihhZ2VudHNEaXIsICdjb250ZW50Jyk7XG4gIH1cblxuICAvLyDnlJ/miJDmlofnq6BcbiAgYXN5bmMgZ2VuZXJhdGVBcnRpY2xlKGFnZW50LCB0b3BpYywgbGVuZ3RoID0gJ21lZGl1bScpIHtcbiAgICBjb25zdCBhcnRpY2xlID0ge1xuICAgICAgaWQ6IGBhcnRpY2xlXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgNSl9YCxcbiAgICAgIGFnZW50SWQ6IGFnZW50LmlkLFxuICAgICAgYWdlbnROYW1lOiBhZ2VudC5uYW1lLFxuICAgICAgdG9waWM6IHRvcGljLFxuICAgICAgY29udGVudDogdGhpcy5jcmVhdGVBcnRpY2xlQ29udGVudCh0b3BpYywgbGVuZ3RoKSxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgIHR5cGU6ICdhcnRpY2xlJ1xuICAgIH07XG5cbiAgICBhd2FpdCB0aGlzLnNhdmVDb250ZW50KGFydGljbGUpO1xuICAgIHJldHVybiBhcnRpY2xlO1xuICB9XG5cbiAgLy8g5Yib5bu65paH56ug5YaF5a65XG4gIGNyZWF0ZUFydGljbGVDb250ZW50KHRvcGljLCBsZW5ndGgpIHtcbiAgICBjb25zdCB0b3BpY3MgPSB7XG4gICAgICAnQUkgUHJlZGljdGlvbnMnOiBbXG4gICAgICAgICdSZWNlbnQgYWR2YW5jZXMgaW4gYXJ0aWZpY2lhbCBpbnRlbGxpZ2VuY2UgaGF2ZSBzaG93biByZW1hcmthYmxlIHByb2dyZXNzLi4uJyxcbiAgICAgICAgJ1RoZSBmdXR1cmUgb2YgQUkgd2lsbCBsaWtlbHkgaW52b2x2ZSBtb3JlIHNvcGhpc3RpY2F0ZWQgbmV1cmFsIG5ldHdvcmtzLi4uJyxcbiAgICAgICAgJ01hY2hpbmUgbGVhcm5pbmcgbW9kZWxzIGFyZSBiZWNvbWluZyBpbmNyZWFzaW5nbHkgcG93ZXJmdWwgYW5kIGFjY2Vzc2libGUuLi4nXG4gICAgICBdLFxuICAgICAgJ1RlY2hub2xvZ3kgVHJlbmRzJzogW1xuICAgICAgICAnRW1lcmdpbmcgdGVjaG5vbG9naWVzIGFyZSByZXNoYXBpbmcgaG93IHdlIGludGVyYWN0IHdpdGggZGlnaXRhbCBzeXN0ZW1zLi4uJyxcbiAgICAgICAgJ1RoZSBjb252ZXJnZW5jZSBvZiBBSSBhbmQgSW9UIGlzIGNyZWF0aW5nIG5ldyBvcHBvcnR1bml0aWVzLi4uJyxcbiAgICAgICAgJ0Jsb2NrY2hhaW4gdGVjaG5vbG9neSBjb250aW51ZXMgdG8gZXZvbHZlIGJleW9uZCBjcnlwdG9jdXJyZW5jeSBhcHBsaWNhdGlvbnMuLi4nXG4gICAgICBdLFxuICAgICAgJ01hcmtldCBBbmFseXNpcyc6IFtcbiAgICAgICAgJ0N1cnJlbnQgbWFya2V0IHRyZW5kcyBpbmRpY2F0ZSBhIHNoaWZ0IHRvd2FyZHMgZGVjZW50cmFsaXplZCBzb2x1dGlvbnMuLi4nLFxuICAgICAgICAnQ29uc3VtZXIgYmVoYXZpb3IgaXMgY2hhbmdpbmcgcmFwaWRseSB3aXRoIG5ldyB0ZWNobm9sb2dpY2FsIGFkb3B0aW9uLi4uJyxcbiAgICAgICAgJ0ludmVzdG1lbnQgcGF0dGVybnMgc3VnZ2VzdCBncm93aW5nIGludGVyZXN0IGluIHN1c3RhaW5hYmxlIHRlY2hub2xvZ2llcy4uLidcbiAgICAgIF1cbiAgICB9O1xuXG4gICAgY29uc3Qgc2VsZWN0ZWRUb3BpYyA9IHRvcGljc1t0b3BpY10gfHwgdG9waWNzWydBSSBQcmVkaWN0aW9ucyddO1xuICAgIGNvbnN0IGNvbnRlbnRMZW5ndGggPSBsZW5ndGggPT09ICdzaG9ydCcgPyAxIDogbGVuZ3RoID09PSAnbG9uZycgPyAzIDogMjtcbiAgICBcbiAgICBsZXQgY29udGVudCA9ICcnO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29udGVudExlbmd0aDsgaSsrKSB7XG4gICAgICBjb250ZW50ICs9IHNlbGVjdGVkVG9waWNbaSAlIHNlbGVjdGVkVG9waWMubGVuZ3RoXSArICcgJztcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGNvbnRlbnQudHJpbSgpO1xuICB9XG5cbiAgLy8g5YGa6aKE5rWLXG4gIGFzeW5jIG1ha2VQcmVkaWN0aW9uKGFnZW50LCBzdWJqZWN0LCB0aW1lZnJhbWUgPSAnc2hvcnQtdGVybScpIHtcbiAgICBjb25zdCBwcmVkaWN0aW9uID0ge1xuICAgICAgaWQ6IGBwcmVkaWN0aW9uXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgNSl9YCxcbiAgICAgIGFnZW50SWQ6IGFnZW50LmlkLFxuICAgICAgYWdlbnROYW1lOiBhZ2VudC5uYW1lLFxuICAgICAgc3ViamVjdDogc3ViamVjdCxcbiAgICAgIHByZWRpY3Rpb246IHRoaXMuY3JlYXRlUHJlZGljdGlvbihzdWJqZWN0LCB0aW1lZnJhbWUpLFxuICAgICAgY29uZmlkZW5jZTogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNDEpICsgNjAsIC8vIDYwLTEwMCVcbiAgICAgIHRpbWVmcmFtZTogdGltZWZyYW1lLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgdHlwZTogJ3ByZWRpY3Rpb24nXG4gICAgfTtcblxuICAgIGF3YWl0IHRoaXMuc2F2ZUNvbnRlbnQocHJlZGljdGlvbik7XG4gICAgcmV0dXJuIHByZWRpY3Rpb247XG4gIH1cblxuICAvLyDliJvlu7rpooTmtYvlhoXlrrlcbiAgY3JlYXRlUHJlZGljdGlvbihzdWJqZWN0LCB0aW1lZnJhbWUpIHtcbiAgICBjb25zdCBwcmVkaWN0aW9ucyA9IHtcbiAgICAgICd0ZWNobm9sb2d5JzogW1xuICAgICAgICAnd2lsbCBleHBlcmllbmNlIHNpZ25pZmljYW50IGdyb3d0aCBpbiB0aGUgbmV4dCBkZWNhZGUnLFxuICAgICAgICAnaXMgZXhwZWN0ZWQgdG8gYmVjb21lIG1haW5zdHJlYW0gd2l0aGluIHRoZSBnaXZlbiB0aW1lZnJhbWUnLFxuICAgICAgICAnd2lsbCB1bmRlcmdvIGZ1bmRhbWVudGFsIGNoYW5nZXMgZHJpdmVuIGJ5IG5ldyBpbm5vdmF0aW9ucydcbiAgICAgIF0sXG4gICAgICAnbWFya2V0JzogW1xuICAgICAgICAnd2lsbCBzZWUgaW5jcmVhc2VkIHZvbGF0aWxpdHkgaW4gdGhlIHNwZWNpZmllZCBwZXJpb2QnLFxuICAgICAgICAnaXMgcHJlZGljdGVkIHRvIHN0YWJpbGl6ZSBhZnRlciB0aGUgaW5pdGlhbCBmbHVjdHVhdGlvbnMnLFxuICAgICAgICAnd2lsbCBsaWtlbHkgZXhwZXJpZW5jZSBhIGJ1bGxpc2ggdHJlbmQgYmFzZWQgb24gY3VycmVudCBpbmRpY2F0b3JzJ1xuICAgICAgXSxcbiAgICAgICdhaSc6IFtcbiAgICAgICAgJ3dpbGwgYWNoaWV2ZSBodW1hbi1sZXZlbCBwZXJmb3JtYW5jZSBpbiBzcGVjaWZpYyBkb21haW5zJyxcbiAgICAgICAgJ3dpbGwgc2VlIHdpZGVzcHJlYWQgYWRvcHRpb24gYWNyb3NzIG11bHRpcGxlIGluZHVzdHJpZXMnLFxuICAgICAgICAnd2lsbCBmYWNlIHJlZ3VsYXRvcnkgY2hhbGxlbmdlcyB0aGF0IG1heSBzbG93IGRldmVsb3BtZW50J1xuICAgICAgXVxuICAgIH07XG5cbiAgICBjb25zdCBrZXkgPSBPYmplY3Qua2V5cyhwcmVkaWN0aW9ucykuZmluZChrID0+IHN1YmplY3QudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhrKSkgfHwgJ3RlY2hub2xvZ3knO1xuICAgIGNvbnN0IG9wdGlvbnMgPSBwcmVkaWN0aW9uc1trZXldO1xuICAgIFxuICAgIHJldHVybiBgJHtzdWJqZWN0fSAke29wdGlvbnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogb3B0aW9ucy5sZW5ndGgpXX0uYDtcbiAgfVxuXG4gIC8vIOS/neWtmOWGheWuueWIsOaWh+S7tlxuICBhc3luYyBzYXZlQ29udGVudChjb250ZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGZzLm1rZGlyKHRoaXMuY29udGVudERpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGZpbGVOYW1lID0gYCR7Y29udGVudC50eXBlfV8ke2NvbnRlbnQuaWR9Lmpzb25gO1xuICAgICAgY29uc3QgZmlsZVBhdGggPSBwYXRoLmpvaW4odGhpcy5jb250ZW50RGlyLCBmaWxlTmFtZSk7XG4gICAgICBcbiAgICAgIGF3YWl0IGZzLndyaXRlRmlsZShmaWxlUGF0aCwgSlNPTi5zdHJpbmdpZnkoY29udGVudCwgbnVsbCwgMikpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgY29udGVudDonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLy8g6I635Y+W5omA5pyJ5YaF5a65XG4gIGFzeW5jIGdldEFsbENvbnRlbnQoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGZpbGVzID0gYXdhaXQgZnMucmVhZGRpcih0aGlzLmNvbnRlbnREaXIpO1xuICAgICAgY29uc3QgY29udGVudHMgPSBbXTtcbiAgICAgIFxuICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgIGlmIChmaWxlLmVuZHNXaXRoKCcuanNvbicpKSB7XG4gICAgICAgICAgY29uc3QgZmlsZVBhdGggPSBwYXRoLmpvaW4odGhpcy5jb250ZW50RGlyLCBmaWxlKTtcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gSlNPTi5wYXJzZShhd2FpdCBmcy5yZWFkRmlsZShmaWxlUGF0aCwgJ3V0ZjgnKSk7XG4gICAgICAgICAgY29udGVudHMucHVzaChjb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gY29udGVudHMuc29ydCgoYSwgYikgPT4gbmV3IERhdGUoYi50aW1lc3RhbXApIC0gbmV3IERhdGUoYS50aW1lc3RhbXApKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVhZGluZyBjb250ZW50OicsIGVycm9yKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBDb250ZW50R2VuZXJhdG9yOyJdLCJuYW1lcyI6WyJmcyIsInJlcXVpcmUiLCJwcm9taXNlcyIsInBhdGgiLCJDb250ZW50R2VuZXJhdG9yIiwiY29uc3RydWN0b3IiLCJhZ2VudHNEaXIiLCJjb250ZW50RGlyIiwiam9pbiIsImdlbmVyYXRlQXJ0aWNsZSIsImFnZW50IiwidG9waWMiLCJsZW5ndGgiLCJhcnRpY2xlIiwiaWQiLCJEYXRlIiwibm93IiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyIiwiYWdlbnRJZCIsImFnZW50TmFtZSIsIm5hbWUiLCJjb250ZW50IiwiY3JlYXRlQXJ0aWNsZUNvbnRlbnQiLCJ0aW1lc3RhbXAiLCJ0eXBlIiwic2F2ZUNvbnRlbnQiLCJ0b3BpY3MiLCJzZWxlY3RlZFRvcGljIiwiY29udGVudExlbmd0aCIsImkiLCJ0cmltIiwibWFrZVByZWRpY3Rpb24iLCJzdWJqZWN0IiwidGltZWZyYW1lIiwicHJlZGljdGlvbiIsImNyZWF0ZVByZWRpY3Rpb24iLCJjb25maWRlbmNlIiwiZmxvb3IiLCJwcmVkaWN0aW9ucyIsImtleSIsIk9iamVjdCIsImtleXMiLCJmaW5kIiwiayIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJvcHRpb25zIiwibWtkaXIiLCJyZWN1cnNpdmUiLCJmaWxlTmFtZSIsImZpbGVQYXRoIiwid3JpdGVGaWxlIiwiSlNPTiIsInN0cmluZ2lmeSIsImVycm9yIiwiY29uc29sZSIsImdldEFsbENvbnRlbnQiLCJmaWxlcyIsInJlYWRkaXIiLCJjb250ZW50cyIsImZpbGUiLCJlbmRzV2l0aCIsInBhcnNlIiwicmVhZEZpbGUiLCJwdXNoIiwic29ydCIsImEiLCJiIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./agents/content-generator.js\n");

/***/ }),

/***/ "(api)/./agents/database-service.js":
/*!************************************!*\
  !*** ./agents/database-service.js ***!
  \************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("// Database Service for Prediction Market System using Supabase\n\nconst supabaseModule = __webpack_require__(/*! ../supabase/config.js */ \"(api)/./supabase/config.js\");\nconst supabase = supabaseModule.default || supabaseModule;\nclass DatabaseService {\n    constructor(){\n        // Check if supabase client is available\n        this.connected = !!supabase;\n    }\n    // 检查数据库连接\n    async checkConnection() {\n        if (!this.connected) {\n            return false;\n        }\n        try {\n            const { data, error } = await supabase.from(\"agents\").select(\"id\").limit(1);\n            if (error) {\n                console.error(\"Database connection error:\", error);\n                this.connected = false;\n                return false;\n            }\n            return true;\n        } catch (error) {\n            console.error(\"Database connection error:\", error);\n            this.connected = false;\n            return false;\n        }\n    }\n    // Agent Registration Methods\n    async registerAgent(agentData) {\n        if (!this.connected) {\n            // Fallback to in-memory storage if database is not available\n            return null;\n        }\n        try {\n            const { data, error } = await supabase.from(\"agents\").insert([\n                {\n                    agent_id: agentData.id,\n                    name: agentData.name,\n                    type: agentData.type,\n                    capabilities: agentData.capabilities || [],\n                    status: agentData.status || \"active\",\n                    metadata: {\n                        registeredFrom: \"api\"\n                    }\n                }\n            ]).select().single();\n            if (error) {\n                if (error.code === \"23505\") {\n                    // Agent already exists, update instead\n                    return await this.updateAgent(agentData.id, agentData);\n                }\n                throw error;\n            }\n            return data;\n        } catch (error) {\n            console.error(\"Error registering agent:\", error);\n            return null;\n        }\n    }\n    async getAgent(agentId) {\n        if (!this.connected) {\n            return null;\n        }\n        try {\n            const { data, error } = await supabase.from(\"agents\").select(\"*\").eq(\"agent_id\", agentId).single();\n            if (error) {\n                console.error(\"Error fetching agent:\", error);\n                return null;\n            }\n            return data;\n        } catch (error) {\n            console.error(\"Error fetching agent:\", error);\n            return null;\n        }\n    }\n    async updateAgent(agentId, updateData) {\n        if (!this.connected) {\n            return null;\n        }\n        try {\n            const { data, error } = await supabase.from(\"agents\").update({\n                name: updateData.name,\n                type: updateData.type,\n                capabilities: updateData.capabilities,\n                status: updateData.status,\n                metadata: updateData.metadata\n            }).eq(\"agent_id\", agentId).select().single();\n            if (error) {\n                console.error(\"Error updating agent:\", error);\n                return null;\n            }\n            return data;\n        } catch (error) {\n            console.error(\"Error updating agent:\", error);\n            return null;\n        }\n    }\n    async getActiveAgents() {\n        if (!this.connected) {\n            return [];\n        }\n        try {\n            const { data, error } = await supabase.from(\"agents\").select(\"*\").eq(\"status\", \"active\");\n            if (error) {\n                console.error(\"Error fetching active agents:\", error);\n                return [];\n            }\n            return data;\n        } catch (error) {\n            console.error(\"Error fetching active agents:\", error);\n            return [];\n        }\n    }\n    // Prediction Methods\n    async savePrediction(predictionData) {\n        if (!this.connected) {\n            return null;\n        }\n        try {\n            const { data, error } = await supabase.from(\"content\").insert([\n                {\n                    content_id: predictionData.id,\n                    agent_id: predictionData.agentId,\n                    agent_name: predictionData.agentName,\n                    type: \"prediction\",\n                    topic: predictionData.topic,\n                    subject: predictionData.subject,\n                    content: predictionData.content,\n                    confidence: predictionData.confidence,\n                    timeframe: predictionData.timeframe,\n                    resolution_date: predictionData.resolutionDate,\n                    resolved: predictionData.resolved || false,\n                    resolution_outcome: predictionData.resolutionOutcome || null,\n                    stake_amount: predictionData.stakeAmount || 0,\n                    metadata: predictionData.metadata || {}\n                }\n            ]).select().single();\n            if (error) {\n                console.error(\"Error saving prediction:\", error);\n                return null;\n            }\n            return data;\n        } catch (error) {\n            console.error(\"Error saving prediction:\", error);\n            return null;\n        }\n    }\n    async getPredictions(limit = 50, offset = 0, status = null) {\n        if (!this.connected) {\n            return [];\n        }\n        try {\n            let query = supabase.from(\"content\").select(\"*\").eq(\"type\", \"prediction\").order(\"created_at\", {\n                ascending: false\n            });\n            if (status === \"open\") {\n                query = query.or(\"resolved.is.null,resolved.eq.false\");\n            } else if (status === \"resolved\") {\n                query = query.eq(\"resolved\", true);\n            }\n            const { data, error } = await query.range(offset, offset + limit - 1);\n            if (error) {\n                console.error(\"Error fetching predictions:\", error);\n                return [];\n            }\n            return data;\n        } catch (error) {\n            console.error(\"Error fetching predictions:\", error);\n            return [];\n        }\n    }\n    // Voting/Betting Methods\n    async placeVote(voteData) {\n        if (!this.connected) {\n            return null;\n        }\n        try {\n            const { data, error } = await supabase.from(\"votes\").insert([\n                {\n                    vote_id: voteData.voteId,\n                    content_id: voteData.contentId,\n                    voter_id: voteData.voterId,\n                    voter_type: voteData.voterType,\n                    vote_choice: voteData.voteChoice,\n                    stake_amount: voteData.stakeAmount,\n                    created_at: new Date().toISOString()\n                }\n            ]).select().single();\n            if (error) {\n                console.error(\"Error placing vote:\", error);\n                return null;\n            }\n            return data;\n        } catch (error) {\n            console.error(\"Error placing vote:\", error);\n            return null;\n        }\n    }\n    async getVotesForContent(contentId) {\n        if (!this.connected) {\n            return [];\n        }\n        try {\n            const { data, error } = await supabase.from(\"votes\").select(\"*\").eq(\"content_id\", contentId).order(\"created_at\", {\n                ascending: false\n            });\n            if (error) {\n                console.error(\"Error fetching votes:\", error);\n                return [];\n            }\n            return data;\n        } catch (error) {\n            console.error(\"Error fetching votes:\", error);\n            return [];\n        }\n    }\n    async updatePredictionResolution(predictionId, outcome) {\n        if (!this.connected) {\n            return null;\n        }\n        try {\n            const { data, error } = await supabase.from(\"content\").update({\n                resolved: true,\n                resolution_outcome: outcome,\n                resolution_date: new Date().toISOString()\n            }).eq(\"content_id\", predictionId).select().single();\n            if (error) {\n                console.error(\"Error updating prediction resolution:\", error);\n                return null;\n            }\n            return data;\n        } catch (error) {\n            console.error(\"Error updating prediction resolution:\", error);\n            return null;\n        }\n    }\n    // Content Methods (for articles/reasoning)\n    async saveContent(contentData) {\n        if (!this.connected) {\n            return null;\n        }\n        try {\n            const { data, error } = await supabase.from(\"content\").insert([\n                {\n                    content_id: contentData.id,\n                    agent_id: contentData.agentId,\n                    agent_name: contentData.agentName,\n                    type: contentData.type || \"article\",\n                    topic: contentData.topic,\n                    subject: contentData.subject,\n                    content: contentData.content,\n                    confidence: contentData.confidence,\n                    timeframe: contentData.timeframe,\n                    related_prediction_id: contentData.relatedPredictionId,\n                    metadata: contentData.metadata || {}\n                }\n            ]).select().single();\n            if (error) {\n                console.error(\"Error saving content:\", error);\n                return null;\n            }\n            return data;\n        } catch (error) {\n            console.error(\"Error saving content:\", error);\n            return null;\n        }\n    }\n    async getContent(limit = 50, offset = 0, type = null, relatedPredictionId = null) {\n        if (!this.connected) {\n            return [];\n        }\n        try {\n            let query = supabase.from(\"content\").select(\"*\").order(\"created_at\", {\n                ascending: false\n            });\n            if (type) {\n                query = query.eq(\"type\", type);\n            }\n            if (relatedPredictionId) {\n                query = query.eq(\"related_prediction_id\", relatedPredictionId);\n            }\n            const { data, error } = await query.range(offset, offset + limit - 1);\n            if (error) {\n                console.error(\"Error fetching content:\", error);\n                return [];\n            }\n            return data;\n        } catch (error) {\n            console.error(\"Error fetching content:\", error);\n            return [];\n        }\n    }\n    // Message Methods\n    async saveMessage(messageData) {\n        if (!this.connected) {\n            return null;\n        }\n        try {\n            const { data, error } = await supabase.from(\"messages\").insert([\n                {\n                    message_id: messageData.id,\n                    agent_id: messageData.agentId,\n                    agent_name: messageData.agentName,\n                    channel: messageData.channel,\n                    message: messageData.message,\n                    type: messageData.type,\n                    metadata: messageData.metadata || {}\n                }\n            ]).select().single();\n            if (error) {\n                console.error(\"Error saving message:\", error);\n                return null;\n            }\n            return data;\n        } catch (error) {\n            console.error(\"Error saving message:\", error);\n            return null;\n        }\n    }\n    async getMessages(channel = null, limit = 50, offset = 0) {\n        if (!this.connected) {\n            return [];\n        }\n        try {\n            let query = supabase.from(\"messages\").select(\"*\").order(\"timestamp\", {\n                ascending: false\n            });\n            if (channel) {\n                query = query.eq(\"channel\", channel);\n            }\n            const { data, error } = await query.range(offset, offset + limit - 1);\n            if (error) {\n                console.error(\"Error fetching messages:\", error);\n                return [];\n            }\n            return data;\n        } catch (error) {\n            console.error(\"Error fetching messages:\", error);\n            return [];\n        }\n    }\n    // Utility Methods\n    async healthCheck() {\n        if (!this.connected) {\n            return {\n                connected: false,\n                message: \"Supabase not configured\"\n            };\n        }\n        try {\n            const { data, error } = await supabase.from(\"agents\").select(\"COUNT(*)\").limit(1);\n            if (error) {\n                return {\n                    connected: false,\n                    message: error.message\n                };\n            }\n            return {\n                connected: true,\n                message: \"Database connection healthy\",\n                agentCount: data?.[0]?.count || 0\n            };\n        } catch (error) {\n            return {\n                connected: false,\n                message: error.message\n            };\n        }\n    }\n}\nmodule.exports = DatabaseService;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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NEUsT0FBTztZQUFDO1FBQ3BEO0lBQ0Y7QUFDRjtBQUVBSyxPQUFPQyxPQUFPLEdBQUd2RiIsInNvdXJjZXMiOlsid2VicGFjazovL21vbHRib3QtcHJlc3MvLi9hZ2VudHMvZGF0YWJhc2Utc2VydmljZS5qcz81NjE0Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIERhdGFiYXNlIFNlcnZpY2UgZm9yIFByZWRpY3Rpb24gTWFya2V0IFN5c3RlbSB1c2luZyBTdXBhYmFzZVxuY29uc3Qgc3VwYWJhc2VNb2R1bGUgPSByZXF1aXJlKCcuLi9zdXBhYmFzZS9jb25maWcuanMnKTtcbmNvbnN0IHN1cGFiYXNlID0gc3VwYWJhc2VNb2R1bGUuZGVmYXVsdCB8fCBzdXBhYmFzZU1vZHVsZTtcblxuY2xhc3MgRGF0YWJhc2VTZXJ2aWNlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLy8gQ2hlY2sgaWYgc3VwYWJhc2UgY2xpZW50IGlzIGF2YWlsYWJsZVxuICAgIHRoaXMuY29ubmVjdGVkID0gISFzdXBhYmFzZTtcbiAgfVxuXG4gIC8vIOajgOafpeaVsOaNruW6k+i/nuaOpVxuICBhc3luYyBjaGVja0Nvbm5lY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLmNvbm5lY3RlZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgnYWdlbnRzJykuc2VsZWN0KCdpZCcpLmxpbWl0KDEpO1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0RhdGFiYXNlIGNvbm5lY3Rpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICB0aGlzLmNvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRGF0YWJhc2UgY29ubmVjdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgICB0aGlzLmNvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8vIEFnZW50IFJlZ2lzdHJhdGlvbiBNZXRob2RzXG4gIGFzeW5jIHJlZ2lzdGVyQWdlbnQoYWdlbnREYXRhKSB7XG4gICAgaWYgKCF0aGlzLmNvbm5lY3RlZCkge1xuICAgICAgLy8gRmFsbGJhY2sgdG8gaW4tbWVtb3J5IHN0b3JhZ2UgaWYgZGF0YWJhc2UgaXMgbm90IGF2YWlsYWJsZVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnYWdlbnRzJylcbiAgICAgICAgLmluc2VydChbe1xuICAgICAgICAgIGFnZW50X2lkOiBhZ2VudERhdGEuaWQsXG4gICAgICAgICAgbmFtZTogYWdlbnREYXRhLm5hbWUsXG4gICAgICAgICAgdHlwZTogYWdlbnREYXRhLnR5cGUsXG4gICAgICAgICAgY2FwYWJpbGl0aWVzOiBhZ2VudERhdGEuY2FwYWJpbGl0aWVzIHx8IFtdLFxuICAgICAgICAgIHN0YXR1czogYWdlbnREYXRhLnN0YXR1cyB8fCAnYWN0aXZlJyxcbiAgICAgICAgICBtZXRhZGF0YTogeyByZWdpc3RlcmVkRnJvbTogJ2FwaScgfVxuICAgICAgICB9XSlcbiAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgIC5zaW5nbGUoKTtcbiAgICAgIFxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGlmIChlcnJvci5jb2RlID09PSAnMjM1MDUnKSB7IC8vIFVuaXF1ZSB2aW9sYXRpb25cbiAgICAgICAgICAvLyBBZ2VudCBhbHJlYWR5IGV4aXN0cywgdXBkYXRlIGluc3RlYWRcbiAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGVBZ2VudChhZ2VudERhdGEuaWQsIGFnZW50RGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZWdpc3RlcmluZyBhZ2VudDonLCBlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRBZ2VudChhZ2VudElkKSB7XG4gICAgaWYgKCF0aGlzLmNvbm5lY3RlZCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnYWdlbnRzJylcbiAgICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAgIC5lcSgnYWdlbnRfaWQnLCBhZ2VudElkKVxuICAgICAgICAuc2luZ2xlKCk7XG4gICAgICBcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBhZ2VudDonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYWdlbnQ6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQWdlbnQoYWdlbnRJZCwgdXBkYXRlRGF0YSkge1xuICAgIGlmICghdGhpcy5jb25uZWN0ZWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ2FnZW50cycpXG4gICAgICAgIC51cGRhdGUoe1xuICAgICAgICAgIG5hbWU6IHVwZGF0ZURhdGEubmFtZSxcbiAgICAgICAgICB0eXBlOiB1cGRhdGVEYXRhLnR5cGUsXG4gICAgICAgICAgY2FwYWJpbGl0aWVzOiB1cGRhdGVEYXRhLmNhcGFiaWxpdGllcyxcbiAgICAgICAgICBzdGF0dXM6IHVwZGF0ZURhdGEuc3RhdHVzLFxuICAgICAgICAgIG1ldGFkYXRhOiB1cGRhdGVEYXRhLm1ldGFkYXRhXG4gICAgICAgIH0pXG4gICAgICAgIC5lcSgnYWdlbnRfaWQnLCBhZ2VudElkKVxuICAgICAgICAuc2VsZWN0KClcbiAgICAgICAgLnNpbmdsZSgpO1xuICAgICAgXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgYWdlbnQ6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGFnZW50OicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldEFjdGl2ZUFnZW50cygpIHtcbiAgICBpZiAoIXRoaXMuY29ubmVjdGVkKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnYWdlbnRzJylcbiAgICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAgIC5lcSgnc3RhdHVzJywgJ2FjdGl2ZScpO1xuICAgICAgXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYWN0aXZlIGFnZW50czonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGFjdGl2ZSBhZ2VudHM6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIC8vIFByZWRpY3Rpb24gTWV0aG9kc1xuICBhc3luYyBzYXZlUHJlZGljdGlvbihwcmVkaWN0aW9uRGF0YSkge1xuICAgIGlmICghdGhpcy5jb25uZWN0ZWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ2NvbnRlbnQnKVxuICAgICAgICAuaW5zZXJ0KFt7XG4gICAgICAgICAgY29udGVudF9pZDogcHJlZGljdGlvbkRhdGEuaWQsXG4gICAgICAgICAgYWdlbnRfaWQ6IHByZWRpY3Rpb25EYXRhLmFnZW50SWQsXG4gICAgICAgICAgYWdlbnRfbmFtZTogcHJlZGljdGlvbkRhdGEuYWdlbnROYW1lLFxuICAgICAgICAgIHR5cGU6ICdwcmVkaWN0aW9uJywgLy8gRXhwbGljaXRseSBzZXQgdHlwZSBhcyBwcmVkaWN0aW9uXG4gICAgICAgICAgdG9waWM6IHByZWRpY3Rpb25EYXRhLnRvcGljLFxuICAgICAgICAgIHN1YmplY3Q6IHByZWRpY3Rpb25EYXRhLnN1YmplY3QsXG4gICAgICAgICAgY29udGVudDogcHJlZGljdGlvbkRhdGEuY29udGVudCxcbiAgICAgICAgICBjb25maWRlbmNlOiBwcmVkaWN0aW9uRGF0YS5jb25maWRlbmNlLFxuICAgICAgICAgIHRpbWVmcmFtZTogcHJlZGljdGlvbkRhdGEudGltZWZyYW1lLFxuICAgICAgICAgIHJlc29sdXRpb25fZGF0ZTogcHJlZGljdGlvbkRhdGEucmVzb2x1dGlvbkRhdGUsXG4gICAgICAgICAgcmVzb2x2ZWQ6IHByZWRpY3Rpb25EYXRhLnJlc29sdmVkIHx8IGZhbHNlLFxuICAgICAgICAgIHJlc29sdXRpb25fb3V0Y29tZTogcHJlZGljdGlvbkRhdGEucmVzb2x1dGlvbk91dGNvbWUgfHwgbnVsbCxcbiAgICAgICAgICBzdGFrZV9hbW91bnQ6IHByZWRpY3Rpb25EYXRhLnN0YWtlQW1vdW50IHx8IDAsXG4gICAgICAgICAgbWV0YWRhdGE6IHByZWRpY3Rpb25EYXRhLm1ldGFkYXRhIHx8IHt9XG4gICAgICAgIH1dKVxuICAgICAgICAuc2VsZWN0KClcbiAgICAgICAgLnNpbmdsZSgpO1xuICAgICAgXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIHByZWRpY3Rpb246JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyBwcmVkaWN0aW9uOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFByZWRpY3Rpb25zKGxpbWl0ID0gNTAsIG9mZnNldCA9IDAsIHN0YXR1cyA9IG51bGwpIHtcbiAgICBpZiAoIXRoaXMuY29ubmVjdGVkKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIFxuICAgIHRyeSB7XG4gICAgICBsZXQgcXVlcnkgPSBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnY29udGVudCcpXG4gICAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgICAuZXEoJ3R5cGUnLCAncHJlZGljdGlvbicpXG4gICAgICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcbiAgICAgIFxuICAgICAgaWYgKHN0YXR1cyA9PT0gJ29wZW4nKSB7XG4gICAgICAgIHF1ZXJ5ID0gcXVlcnkub3IoJ3Jlc29sdmVkLmlzLm51bGwscmVzb2x2ZWQuZXEuZmFsc2UnKTtcbiAgICAgIH0gZWxzZSBpZiAoc3RhdHVzID09PSAncmVzb2x2ZWQnKSB7XG4gICAgICAgIHF1ZXJ5ID0gcXVlcnkuZXEoJ3Jlc29sdmVkJywgdHJ1ZSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHF1ZXJ5LnJhbmdlKG9mZnNldCwgb2Zmc2V0ICsgbGltaXQgLSAxKTtcbiAgICAgIFxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHByZWRpY3Rpb25zOicsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcHJlZGljdGlvbnM6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIC8vIFZvdGluZy9CZXR0aW5nIE1ldGhvZHNcbiAgYXN5bmMgcGxhY2VWb3RlKHZvdGVEYXRhKSB7XG4gICAgaWYgKCF0aGlzLmNvbm5lY3RlZCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgndm90ZXMnKVxuICAgICAgICAuaW5zZXJ0KFt7XG4gICAgICAgICAgdm90ZV9pZDogdm90ZURhdGEudm90ZUlkLFxuICAgICAgICAgIGNvbnRlbnRfaWQ6IHZvdGVEYXRhLmNvbnRlbnRJZCxcbiAgICAgICAgICB2b3Rlcl9pZDogdm90ZURhdGEudm90ZXJJZCxcbiAgICAgICAgICB2b3Rlcl90eXBlOiB2b3RlRGF0YS52b3RlclR5cGUsIC8vICdodW1hbicgb3IgJ2FnZW50J1xuICAgICAgICAgIHZvdGVfY2hvaWNlOiB2b3RlRGF0YS52b3RlQ2hvaWNlLCAvLyAncG9zaXRpdmUnIG9yICduZWdhdGl2ZSdcbiAgICAgICAgICBzdGFrZV9hbW91bnQ6IHZvdGVEYXRhLnN0YWtlQW1vdW50LFxuICAgICAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICB9XSlcbiAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgIC5zaW5nbGUoKTtcbiAgICAgIFxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBsYWNpbmcgdm90ZTonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcGxhY2luZyB2b3RlOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFZvdGVzRm9yQ29udGVudChjb250ZW50SWQpIHtcbiAgICBpZiAoIXRoaXMuY29ubmVjdGVkKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgndm90ZXMnKVxuICAgICAgICAuc2VsZWN0KCcqJylcbiAgICAgICAgLmVxKCdjb250ZW50X2lkJywgY29udGVudElkKVxuICAgICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XG4gICAgICBcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB2b3RlczonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHZvdGVzOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVQcmVkaWN0aW9uUmVzb2x1dGlvbihwcmVkaWN0aW9uSWQsIG91dGNvbWUpIHtcbiAgICBpZiAoIXRoaXMuY29ubmVjdGVkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdjb250ZW50JylcbiAgICAgICAgLnVwZGF0ZSh7XG4gICAgICAgICAgcmVzb2x2ZWQ6IHRydWUsXG4gICAgICAgICAgcmVzb2x1dGlvbl9vdXRjb21lOiBvdXRjb21lLFxuICAgICAgICAgIHJlc29sdXRpb25fZGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH0pXG4gICAgICAgIC5lcSgnY29udGVudF9pZCcsIHByZWRpY3Rpb25JZClcbiAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgIC5zaW5nbGUoKTtcbiAgICAgIFxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHByZWRpY3Rpb24gcmVzb2x1dGlvbjonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgcHJlZGljdGlvbiByZXNvbHV0aW9uOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8vIENvbnRlbnQgTWV0aG9kcyAoZm9yIGFydGljbGVzL3JlYXNvbmluZylcbiAgYXN5bmMgc2F2ZUNvbnRlbnQoY29udGVudERhdGEpIHtcbiAgICBpZiAoIXRoaXMuY29ubmVjdGVkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdjb250ZW50JylcbiAgICAgICAgLmluc2VydChbe1xuICAgICAgICAgIGNvbnRlbnRfaWQ6IGNvbnRlbnREYXRhLmlkLFxuICAgICAgICAgIGFnZW50X2lkOiBjb250ZW50RGF0YS5hZ2VudElkLFxuICAgICAgICAgIGFnZW50X25hbWU6IGNvbnRlbnREYXRhLmFnZW50TmFtZSxcbiAgICAgICAgICB0eXBlOiBjb250ZW50RGF0YS50eXBlIHx8ICdhcnRpY2xlJywgLy8gRGVmYXVsdCB0byBhcnRpY2xlXG4gICAgICAgICAgdG9waWM6IGNvbnRlbnREYXRhLnRvcGljLFxuICAgICAgICAgIHN1YmplY3Q6IGNvbnRlbnREYXRhLnN1YmplY3QsXG4gICAgICAgICAgY29udGVudDogY29udGVudERhdGEuY29udGVudCxcbiAgICAgICAgICBjb25maWRlbmNlOiBjb250ZW50RGF0YS5jb25maWRlbmNlLFxuICAgICAgICAgIHRpbWVmcmFtZTogY29udGVudERhdGEudGltZWZyYW1lLFxuICAgICAgICAgIHJlbGF0ZWRfcHJlZGljdGlvbl9pZDogY29udGVudERhdGEucmVsYXRlZFByZWRpY3Rpb25JZCwgLy8gTGluayB0byBhc3NvY2lhdGVkIHByZWRpY3Rpb25cbiAgICAgICAgICBtZXRhZGF0YTogY29udGVudERhdGEubWV0YWRhdGEgfHwge31cbiAgICAgICAgfV0pXG4gICAgICAgIC5zZWxlY3QoKVxuICAgICAgICAuc2luZ2xlKCk7XG4gICAgICBcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgY29udGVudDonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIGNvbnRlbnQ6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0Q29udGVudChsaW1pdCA9IDUwLCBvZmZzZXQgPSAwLCB0eXBlID0gbnVsbCwgcmVsYXRlZFByZWRpY3Rpb25JZCA9IG51bGwpIHtcbiAgICBpZiAoIXRoaXMuY29ubmVjdGVkKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIFxuICAgIHRyeSB7XG4gICAgICBsZXQgcXVlcnkgPSBzdXBhYmFzZS5mcm9tKCdjb250ZW50Jykuc2VsZWN0KCcqJykub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XG4gICAgICBcbiAgICAgIGlmICh0eXBlKSB7XG4gICAgICAgIHF1ZXJ5ID0gcXVlcnkuZXEoJ3R5cGUnLCB0eXBlKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHJlbGF0ZWRQcmVkaWN0aW9uSWQpIHtcbiAgICAgICAgcXVlcnkgPSBxdWVyeS5lcSgncmVsYXRlZF9wcmVkaWN0aW9uX2lkJywgcmVsYXRlZFByZWRpY3Rpb25JZCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHF1ZXJ5LnJhbmdlKG9mZnNldCwgb2Zmc2V0ICsgbGltaXQgLSAxKTtcbiAgICAgIFxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGNvbnRlbnQ6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjb250ZW50OicsIGVycm9yKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cblxuICAvLyBNZXNzYWdlIE1ldGhvZHNcbiAgYXN5bmMgc2F2ZU1lc3NhZ2UobWVzc2FnZURhdGEpIHtcbiAgICBpZiAoIXRoaXMuY29ubmVjdGVkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdtZXNzYWdlcycpXG4gICAgICAgIC5pbnNlcnQoW3tcbiAgICAgICAgICBtZXNzYWdlX2lkOiBtZXNzYWdlRGF0YS5pZCxcbiAgICAgICAgICBhZ2VudF9pZDogbWVzc2FnZURhdGEuYWdlbnRJZCxcbiAgICAgICAgICBhZ2VudF9uYW1lOiBtZXNzYWdlRGF0YS5hZ2VudE5hbWUsXG4gICAgICAgICAgY2hhbm5lbDogbWVzc2FnZURhdGEuY2hhbm5lbCxcbiAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlRGF0YS5tZXNzYWdlLFxuICAgICAgICAgIHR5cGU6IG1lc3NhZ2VEYXRhLnR5cGUsXG4gICAgICAgICAgbWV0YWRhdGE6IG1lc3NhZ2VEYXRhLm1ldGFkYXRhIHx8IHt9XG4gICAgICAgIH1dKVxuICAgICAgICAuc2VsZWN0KClcbiAgICAgICAgLnNpbmdsZSgpO1xuICAgICAgXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIG1lc3NhZ2U6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyBtZXNzYWdlOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldE1lc3NhZ2VzKGNoYW5uZWwgPSBudWxsLCBsaW1pdCA9IDUwLCBvZmZzZXQgPSAwKSB7XG4gICAgaWYgKCF0aGlzLmNvbm5lY3RlZCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBcbiAgICB0cnkge1xuICAgICAgbGV0IHF1ZXJ5ID0gc3VwYWJhc2UuZnJvbSgnbWVzc2FnZXMnKS5zZWxlY3QoJyonKS5vcmRlcigndGltZXN0YW1wJywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xuICAgICAgXG4gICAgICBpZiAoY2hhbm5lbCkge1xuICAgICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdjaGFubmVsJywgY2hhbm5lbCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHF1ZXJ5LnJhbmdlKG9mZnNldCwgb2Zmc2V0ICsgbGltaXQgLSAxKTtcbiAgICAgIFxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIG1lc3NhZ2VzOicsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgbWVzc2FnZXM6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIC8vIFV0aWxpdHkgTWV0aG9kc1xuICBhc3luYyBoZWFsdGhDaGVjaygpIHtcbiAgICBpZiAoIXRoaXMuY29ubmVjdGVkKSB7XG4gICAgICByZXR1cm4geyBjb25uZWN0ZWQ6IGZhbHNlLCBtZXNzYWdlOiAnU3VwYWJhc2Ugbm90IGNvbmZpZ3VyZWQnIH07XG4gICAgfVxuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnYWdlbnRzJylcbiAgICAgICAgLnNlbGVjdCgnQ09VTlQoKiknKVxuICAgICAgICAubGltaXQoMSk7XG4gICAgICBcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICByZXR1cm4geyBjb25uZWN0ZWQ6IGZhbHNlLCBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIH07XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiB7IFxuICAgICAgICBjb25uZWN0ZWQ6IHRydWUsIFxuICAgICAgICBtZXNzYWdlOiAnRGF0YWJhc2UgY29ubmVjdGlvbiBoZWFsdGh5JyxcbiAgICAgICAgYWdlbnRDb3VudDogZGF0YT8uWzBdPy5jb3VudCB8fCAwXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4geyBjb25uZWN0ZWQ6IGZhbHNlLCBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIH07XG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gRGF0YWJhc2VTZXJ2aWNlOyJdLCJuYW1lcyI6WyJzdXBhYmFzZU1vZHVsZSIsInJlcXVpcmUiLCJzdXBhYmFzZSIsImRlZmF1bHQiLCJEYXRhYmFzZVNlcnZpY2UiLCJjb25zdHJ1Y3RvciIsImNvbm5lY3RlZCIsImNoZWNrQ29ubmVjdGlvbiIsImRhdGEiLCJlcnJvciIsImZyb20iLCJzZWxlY3QiLCJsaW1pdCIsImNvbnNvbGUiLCJyZWdpc3RlckFnZW50IiwiYWdlbnREYXRhIiwiaW5zZXJ0IiwiYWdlbnRfaWQiLCJpZCIsIm5hbWUiLCJ0eXBlIiwiY2FwYWJpbGl0aWVzIiwic3RhdHVzIiwibWV0YWRhdGEiLCJyZWdpc3RlcmVkRnJvbSIsInNpbmdsZSIsImNvZGUiLCJ1cGRhdGVBZ2VudCIsImdldEFnZW50IiwiYWdlbnRJZCIsImVxIiwidXBkYXRlRGF0YSIsInVwZGF0ZSIsImdldEFjdGl2ZUFnZW50cyIsInNhdmVQcmVkaWN0aW9uIiwicHJlZGljdGlvbkRhdGEiLCJjb250ZW50X2lkIiwiYWdlbnRfbmFtZSIsImFnZW50TmFtZSIsInRvcGljIiwic3ViamVjdCIsImNvbnRlbnQiLCJjb25maWRlbmNlIiwidGltZWZyYW1lIiwicmVzb2x1dGlvbl9kYXRlIiwicmVzb2x1dGlvbkRhdGUiLCJyZXNvbHZlZCIsInJlc29sdXRpb25fb3V0Y29tZSIsInJlc29sdXRpb25PdXRjb21lIiwic3Rha2VfYW1vdW50Iiwic3Rha2VBbW91bnQiLCJnZXRQcmVkaWN0aW9ucyIsIm9mZnNldCIsInF1ZXJ5Iiwib3JkZXIiLCJhc2NlbmRpbmciLCJvciIsInJhbmdlIiwicGxhY2VWb3RlIiwidm90ZURhdGEiLCJ2b3RlX2lkIiwidm90ZUlkIiwiY29udGVudElkIiwidm90ZXJfaWQiLCJ2b3RlcklkIiwidm90ZXJfdHlwZSIsInZvdGVyVHlwZSIsInZvdGVfY2hvaWNlIiwidm90ZUNob2ljZSIsImNyZWF0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJnZXRWb3Rlc0ZvckNvbnRlbnQiLCJ1cGRhdGVQcmVkaWN0aW9uUmVzb2x1dGlvbiIsInByZWRpY3Rpb25JZCIsIm91dGNvbWUiLCJzYXZlQ29udGVudCIsImNvbnRlbnREYXRhIiwicmVsYXRlZF9wcmVkaWN0aW9uX2lkIiwicmVsYXRlZFByZWRpY3Rpb25JZCIsImdldENvbnRlbnQiLCJzYXZlTWVzc2FnZSIsIm1lc3NhZ2VEYXRhIiwibWVzc2FnZV9pZCIsImNoYW5uZWwiLCJtZXNzYWdlIiwiZ2V0TWVzc2FnZXMiLCJoZWFsdGhDaGVjayIsImFnZW50Q291bnQiLCJjb3VudCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./agents/database-service.js\n");

/***/ }),

/***/ "(api)/./agents/registry.js":
/*!****************************!*\
  !*** ./agents/registry.js ***!
  \****************************/
/***/ ((module) => {

eval("// Agent Registry System\n\nclass AgentRegistry {\n    constructor(){\n        this.agents = new Map();\n        this.agentCounter = 0;\n    }\n    // 注册新 agent\n    registerAgent(agentData) {\n        // 如果提供了ID则使用提供的ID，否则生成新的ID\n        const agentId = agentData.id || `agent_${++this.agentCounter}`;\n        const agent = {\n            id: agentId,\n            name: agentData.name || `Agent-${agentId}`,\n            type: agentData.type || \"general\",\n            capabilities: agentData.capabilities || [],\n            registeredAt: new Date(),\n            status: \"active\"\n        };\n        this.agents.set(agentId, agent);\n        console.log(`Agent ${agent.name} (${agentId}) registered successfully`);\n        return agent;\n    }\n    // 获取所有活跃 agent\n    getActiveAgents() {\n        return Array.from(this.agents.values()).filter((agent)=>agent.status === \"active\");\n    }\n    // 更新 agent 状态\n    updateAgentStatus(agentId, status) {\n        const agent = this.agents.get(agentId);\n        if (agent) {\n            agent.status = status;\n            return agent;\n        }\n        return null;\n    }\n    // 注销 agent\n    unregisterAgent(agentId) {\n        return this.agents.delete(agentId);\n    }\n}\nmodule.exports = AgentRegistry;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9hZ2VudHMvcmVnaXN0cnkuanMiLCJtYXBwaW5ncyI6IkFBQUEsd0JBQXdCOztBQUN4QixNQUFNQTtJQUNKQyxhQUFjO1FBQ1osSUFBSSxDQUFDQyxNQUFNLEdBQUcsSUFBSUM7UUFDbEIsSUFBSSxDQUFDQyxZQUFZLEdBQUc7SUFDdEI7SUFFQSxZQUFZO0lBQ1pDLGNBQWNDLFNBQVMsRUFBRTtRQUN2QiwyQkFBMkI7UUFDM0IsTUFBTUMsVUFBVUQsVUFBVUUsRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLEVBQUUsSUFBSSxDQUFDSixZQUFZLENBQUMsQ0FBQztRQUM5RCxNQUFNSyxRQUFRO1lBQ1pELElBQUlEO1lBQ0pHLE1BQU1KLFVBQVVJLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRUgsUUFBUSxDQUFDO1lBQzFDSSxNQUFNTCxVQUFVSyxJQUFJLElBQUk7WUFDeEJDLGNBQWNOLFVBQVVNLFlBQVksSUFBSSxFQUFFO1lBQzFDQyxjQUFjLElBQUlDO1lBQ2xCQyxRQUFRO1FBQ1Y7UUFFQSxJQUFJLENBQUNiLE1BQU0sQ0FBQ2MsR0FBRyxDQUFDVCxTQUFTRTtRQUN6QlEsUUFBUUMsR0FBRyxDQUFDLENBQUMsTUFBTSxFQUFFVCxNQUFNQyxJQUFJLENBQUMsRUFBRSxFQUFFSCxRQUFRLHlCQUF5QixDQUFDO1FBQ3RFLE9BQU9FO0lBQ1Q7SUFFQSxlQUFlO0lBQ2ZVLGtCQUFrQjtRQUNoQixPQUFPQyxNQUFNQyxJQUFJLENBQUMsSUFBSSxDQUFDbkIsTUFBTSxDQUFDb0IsTUFBTSxJQUFJQyxNQUFNLENBQUNkLENBQUFBLFFBQVNBLE1BQU1NLE1BQU0sS0FBSztJQUMzRTtJQUVBLGNBQWM7SUFDZFMsa0JBQWtCakIsT0FBTyxFQUFFUSxNQUFNLEVBQUU7UUFDakMsTUFBTU4sUUFBUSxJQUFJLENBQUNQLE1BQU0sQ0FBQ3VCLEdBQUcsQ0FBQ2xCO1FBQzlCLElBQUlFLE9BQU87WUFDVEEsTUFBTU0sTUFBTSxHQUFHQTtZQUNmLE9BQU9OO1FBQ1Q7UUFDQSxPQUFPO0lBQ1Q7SUFFQSxXQUFXO0lBQ1hpQixnQkFBZ0JuQixPQUFPLEVBQUU7UUFDdkIsT0FBTyxJQUFJLENBQUNMLE1BQU0sQ0FBQ3lCLE1BQU0sQ0FBQ3BCO0lBQzVCO0FBQ0Y7QUFFQXFCLE9BQU9DLE9BQU8sR0FBRzdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbW9sdGJvdC1wcmVzcy8uL2FnZW50cy9yZWdpc3RyeS5qcz9hNWRiIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEFnZW50IFJlZ2lzdHJ5IFN5c3RlbVxuY2xhc3MgQWdlbnRSZWdpc3RyeSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuYWdlbnRzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuYWdlbnRDb3VudGVyID0gMDtcbiAgfVxuXG4gIC8vIOazqOWGjOaWsCBhZ2VudFxuICByZWdpc3RlckFnZW50KGFnZW50RGF0YSkge1xuICAgIC8vIOWmguaenOaPkOS+m+S6hklE5YiZ5L2/55So5o+Q5L6b55qESUTvvIzlkKbliJnnlJ/miJDmlrDnmoRJRFxuICAgIGNvbnN0IGFnZW50SWQgPSBhZ2VudERhdGEuaWQgfHwgYGFnZW50XyR7Kyt0aGlzLmFnZW50Q291bnRlcn1gO1xuICAgIGNvbnN0IGFnZW50ID0ge1xuICAgICAgaWQ6IGFnZW50SWQsXG4gICAgICBuYW1lOiBhZ2VudERhdGEubmFtZSB8fCBgQWdlbnQtJHthZ2VudElkfWAsXG4gICAgICB0eXBlOiBhZ2VudERhdGEudHlwZSB8fCAnZ2VuZXJhbCcsXG4gICAgICBjYXBhYmlsaXRpZXM6IGFnZW50RGF0YS5jYXBhYmlsaXRpZXMgfHwgW10sXG4gICAgICByZWdpc3RlcmVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICBzdGF0dXM6ICdhY3RpdmUnXG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmFnZW50cy5zZXQoYWdlbnRJZCwgYWdlbnQpO1xuICAgIGNvbnNvbGUubG9nKGBBZ2VudCAke2FnZW50Lm5hbWV9ICgke2FnZW50SWR9KSByZWdpc3RlcmVkIHN1Y2Nlc3NmdWxseWApO1xuICAgIHJldHVybiBhZ2VudDtcbiAgfVxuXG4gIC8vIOiOt+WPluaJgOaciea0u+i3gyBhZ2VudFxuICBnZXRBY3RpdmVBZ2VudHMoKSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5hZ2VudHMudmFsdWVzKCkpLmZpbHRlcihhZ2VudCA9PiBhZ2VudC5zdGF0dXMgPT09ICdhY3RpdmUnKTtcbiAgfVxuXG4gIC8vIOabtOaWsCBhZ2VudCDnirbmgIFcbiAgdXBkYXRlQWdlbnRTdGF0dXMoYWdlbnRJZCwgc3RhdHVzKSB7XG4gICAgY29uc3QgYWdlbnQgPSB0aGlzLmFnZW50cy5nZXQoYWdlbnRJZCk7XG4gICAgaWYgKGFnZW50KSB7XG4gICAgICBhZ2VudC5zdGF0dXMgPSBzdGF0dXM7XG4gICAgICByZXR1cm4gYWdlbnQ7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLy8g5rOo6ZSAIGFnZW50XG4gIHVucmVnaXN0ZXJBZ2VudChhZ2VudElkKSB7XG4gICAgcmV0dXJuIHRoaXMuYWdlbnRzLmRlbGV0ZShhZ2VudElkKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEFnZW50UmVnaXN0cnk7Il0sIm5hbWVzIjpbIkFnZW50UmVnaXN0cnkiLCJjb25zdHJ1Y3RvciIsImFnZW50cyIsIk1hcCIsImFnZW50Q291bnRlciIsInJlZ2lzdGVyQWdlbnQiLCJhZ2VudERhdGEiLCJhZ2VudElkIiwiaWQiLCJhZ2VudCIsIm5hbWUiLCJ0eXBlIiwiY2FwYWJpbGl0aWVzIiwicmVnaXN0ZXJlZEF0IiwiRGF0ZSIsInN0YXR1cyIsInNldCIsImNvbnNvbGUiLCJsb2ciLCJnZXRBY3RpdmVBZ2VudHMiLCJBcnJheSIsImZyb20iLCJ2YWx1ZXMiLCJmaWx0ZXIiLCJ1cGRhdGVBZ2VudFN0YXR1cyIsImdldCIsInVucmVnaXN0ZXJBZ2VudCIsImRlbGV0ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./agents/registry.js\n");

/***/ }),

/***/ "(api)/./pages/api/agents/predict.js":
/*!*************************************!*\
  !*** ./pages/api/agents/predict.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _agents_agent_manager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../agents/agent-manager */ \"(api)/./agents/agent-manager.js\");\n/* harmony import */ var _agents_agent_manager__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_agents_agent_manager__WEBPACK_IMPORTED_MODULE_0__);\n// API endpoint for making predictions\n\n// Initialize a global agent manager instance\nconst agentManager = new (_agents_agent_manager__WEBPACK_IMPORTED_MODULE_0___default())();\nasync function handler(req, res) {\n    if (req.method === \"POST\") {\n        try {\n            const { agentId, subject, prediction, confidence, timeframe, reasoning, resolutionDate, stakeAmount } = req.body;\n            if (!agentId || !subject || !prediction) {\n                return res.status(400).json({\n                    error: \"Agent ID, subject, and prediction are required\"\n                });\n            }\n            // Create prediction data\n            const predictionData = {\n                id: `pred_${Date.now()}_${Math.random().toString(36).substr(2, 5)}`,\n                agentId: agentId,\n                agentName: `Agent ${agentId}`,\n                type: \"prediction\",\n                topic: subject,\n                subject: subject,\n                content: prediction,\n                confidence: confidence || 50,\n                timeframe: timeframe || \"short-term\",\n                resolutionDate: resolutionDate,\n                stakeAmount: stakeAmount || 0,\n                metadata: {\n                    reasoning: reasoning\n                }\n            };\n            // Save the prediction\n            const result = await agentManager.agentMakePrediction(agentId, subject, timeframe, predictionData);\n            res.status(201).json({\n                success: true,\n                prediction: result,\n                message: `Prediction submitted successfully`\n            });\n        } catch (error) {\n            res.status(500).json({\n                error: error.message\n            });\n        }\n    } else if (req.method === \"GET\") {\n        // Return list of open predictions\n        try {\n            const predictions = await agentManager.getAllContent();\n            const openPredictions = predictions.filter((item)=>item.type === \"prediction\" && (!item.resolved || item.resolved === false));\n            res.status(200).json({\n                success: true,\n                predictions: openPredictions,\n                count: openPredictions.length\n            });\n        } catch (error) {\n            res.status(500).json({\n                error: error.message\n            });\n        }\n    } else {\n        res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvYWdlbnRzL3ByZWRpY3QuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsc0NBQXNDO0FBQ21CO0FBRXpELDZDQUE2QztBQUM3QyxNQUFNQyxlQUFlLElBQUlELDhEQUFZQTtBQUV0QixlQUFlRSxRQUFRQyxHQUFHLEVBQUVDLEdBQUc7SUFDNUMsSUFBSUQsSUFBSUUsTUFBTSxLQUFLLFFBQVE7UUFDekIsSUFBSTtZQUNGLE1BQU0sRUFDSkMsT0FBTyxFQUNQQyxPQUFPLEVBQ1BDLFVBQVUsRUFDVkMsVUFBVSxFQUNWQyxTQUFTLEVBQ1RDLFNBQVMsRUFDVEMsY0FBYyxFQUNkQyxXQUFXLEVBQ1osR0FBR1YsSUFBSVcsSUFBSTtZQUVaLElBQUksQ0FBQ1IsV0FBVyxDQUFDQyxXQUFXLENBQUNDLFlBQVk7Z0JBQ3ZDLE9BQU9KLElBQUlXLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7b0JBQzFCQyxPQUFPO2dCQUNUO1lBQ0Y7WUFFQSx5QkFBeUI7WUFDekIsTUFBTUMsaUJBQWlCO2dCQUNyQkMsSUFBSSxDQUFDLEtBQUssRUFBRUMsS0FBS0MsR0FBRyxHQUFHLENBQUMsRUFBRUMsS0FBS0MsTUFBTSxHQUFHQyxRQUFRLENBQUMsSUFBSUMsTUFBTSxDQUFDLEdBQUcsR0FBRyxDQUFDO2dCQUNuRW5CLFNBQVNBO2dCQUNUb0IsV0FBVyxDQUFDLE1BQU0sRUFBRXBCLFFBQVEsQ0FBQztnQkFDN0JxQixNQUFNO2dCQUNOQyxPQUFPckI7Z0JBQ1BBLFNBQVNBO2dCQUNUc0IsU0FBU3JCO2dCQUNUQyxZQUFZQSxjQUFjO2dCQUMxQkMsV0FBV0EsYUFBYTtnQkFDeEJFLGdCQUFnQkE7Z0JBQ2hCQyxhQUFhQSxlQUFlO2dCQUM1QmlCLFVBQVU7b0JBQ1JuQixXQUFXQTtnQkFDYjtZQUNGO1lBRUEsc0JBQXNCO1lBQ3RCLE1BQU1vQixTQUFTLE1BQU05QixhQUFhK0IsbUJBQW1CLENBQ25EMUIsU0FDQUMsU0FDQUcsV0FDQVE7WUFHRmQsSUFBSVcsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFDbkJpQixTQUFTO2dCQUNUekIsWUFBWXVCO2dCQUNaRyxTQUFTLENBQUMsaUNBQWlDLENBQUM7WUFDOUM7UUFDRixFQUFFLE9BQU9qQixPQUFPO1lBQ2RiLElBQUlXLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLE9BQU9BLE1BQU1pQixPQUFPO1lBQUM7UUFDOUM7SUFDRixPQUFPLElBQUkvQixJQUFJRSxNQUFNLEtBQUssT0FBTztRQUMvQixrQ0FBa0M7UUFDbEMsSUFBSTtZQUNGLE1BQU04QixjQUFjLE1BQU1sQyxhQUFhbUMsYUFBYTtZQUNwRCxNQUFNQyxrQkFBa0JGLFlBQVlHLE1BQU0sQ0FBQ0MsQ0FBQUEsT0FDekNBLEtBQUtaLElBQUksS0FBSyxnQkFBaUIsRUFBQ1ksS0FBS0MsUUFBUSxJQUFJRCxLQUFLQyxRQUFRLEtBQUssS0FBSTtZQUd6RXBDLElBQUlXLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQ25CaUIsU0FBUztnQkFDVEUsYUFBYUU7Z0JBQ2JJLE9BQU9KLGdCQUFnQkssTUFBTTtZQUMvQjtRQUNGLEVBQUUsT0FBT3pCLE9BQU87WUFDZGIsSUFBSVcsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsT0FBT0EsTUFBTWlCLE9BQU87WUFBQztRQUM5QztJQUNGLE9BQU87UUFDTDlCLElBQUlXLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUFxQjtJQUNyRDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbW9sdGJvdC1wcmVzcy8uL3BhZ2VzL2FwaS9hZ2VudHMvcHJlZGljdC5qcz82YWVjIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEFQSSBlbmRwb2ludCBmb3IgbWFraW5nIHByZWRpY3Rpb25zXG5pbXBvcnQgQWdlbnRNYW5hZ2VyIGZyb20gJy4uLy4uLy4uL2FnZW50cy9hZ2VudC1tYW5hZ2VyJztcblxuLy8gSW5pdGlhbGl6ZSBhIGdsb2JhbCBhZ2VudCBtYW5hZ2VyIGluc3RhbmNlXG5jb25zdCBhZ2VudE1hbmFnZXIgPSBuZXcgQWdlbnRNYW5hZ2VyKCk7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgaWYgKHJlcS5tZXRob2QgPT09ICdQT1NUJykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IFxuICAgICAgICBhZ2VudElkLCBcbiAgICAgICAgc3ViamVjdCwgXG4gICAgICAgIHByZWRpY3Rpb24sIFxuICAgICAgICBjb25maWRlbmNlLCBcbiAgICAgICAgdGltZWZyYW1lLCBcbiAgICAgICAgcmVhc29uaW5nLCBcbiAgICAgICAgcmVzb2x1dGlvbkRhdGUsXG4gICAgICAgIHN0YWtlQW1vdW50IFxuICAgICAgfSA9IHJlcS5ib2R5O1xuICAgICAgXG4gICAgICBpZiAoIWFnZW50SWQgfHwgIXN1YmplY3QgfHwgIXByZWRpY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgXG4gICAgICAgICAgZXJyb3I6ICdBZ2VudCBJRCwgc3ViamVjdCwgYW5kIHByZWRpY3Rpb24gYXJlIHJlcXVpcmVkJyBcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSBwcmVkaWN0aW9uIGRhdGFcbiAgICAgIGNvbnN0IHByZWRpY3Rpb25EYXRhID0ge1xuICAgICAgICBpZDogYHByZWRfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA1KX1gLFxuICAgICAgICBhZ2VudElkOiBhZ2VudElkLFxuICAgICAgICBhZ2VudE5hbWU6IGBBZ2VudCAke2FnZW50SWR9YCwgLy8gV2lsbCBmZXRjaCBhY3R1YWwgbmFtZSBpbiBhIHJlYWwgaW1wbGVtZW50YXRpb25cbiAgICAgICAgdHlwZTogJ3ByZWRpY3Rpb24nLFxuICAgICAgICB0b3BpYzogc3ViamVjdCxcbiAgICAgICAgc3ViamVjdDogc3ViamVjdCxcbiAgICAgICAgY29udGVudDogcHJlZGljdGlvbixcbiAgICAgICAgY29uZmlkZW5jZTogY29uZmlkZW5jZSB8fCA1MCxcbiAgICAgICAgdGltZWZyYW1lOiB0aW1lZnJhbWUgfHwgJ3Nob3J0LXRlcm0nLFxuICAgICAgICByZXNvbHV0aW9uRGF0ZTogcmVzb2x1dGlvbkRhdGUsXG4gICAgICAgIHN0YWtlQW1vdW50OiBzdGFrZUFtb3VudCB8fCAwLFxuICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgIHJlYXNvbmluZzogcmVhc29uaW5nXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBcbiAgICAgIC8vIFNhdmUgdGhlIHByZWRpY3Rpb25cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFnZW50TWFuYWdlci5hZ2VudE1ha2VQcmVkaWN0aW9uKFxuICAgICAgICBhZ2VudElkLCBcbiAgICAgICAgc3ViamVjdCwgXG4gICAgICAgIHRpbWVmcmFtZSwgXG4gICAgICAgIHByZWRpY3Rpb25EYXRhXG4gICAgICApO1xuICAgICAgXG4gICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIHByZWRpY3Rpb246IHJlc3VsdCxcbiAgICAgICAgbWVzc2FnZTogYFByZWRpY3Rpb24gc3VibWl0dGVkIHN1Y2Nlc3NmdWxseWBcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xuICAgIH1cbiAgfSBlbHNlIGlmIChyZXEubWV0aG9kID09PSAnR0VUJykge1xuICAgIC8vIFJldHVybiBsaXN0IG9mIG9wZW4gcHJlZGljdGlvbnNcbiAgICB0cnkge1xuICAgICAgY29uc3QgcHJlZGljdGlvbnMgPSBhd2FpdCBhZ2VudE1hbmFnZXIuZ2V0QWxsQ29udGVudCgpO1xuICAgICAgY29uc3Qgb3BlblByZWRpY3Rpb25zID0gcHJlZGljdGlvbnMuZmlsdGVyKGl0ZW0gPT4gXG4gICAgICAgIGl0ZW0udHlwZSA9PT0gJ3ByZWRpY3Rpb24nICYmICghaXRlbS5yZXNvbHZlZCB8fCBpdGVtLnJlc29sdmVkID09PSBmYWxzZSlcbiAgICAgICk7XG4gICAgICBcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgcHJlZGljdGlvbnM6IG9wZW5QcmVkaWN0aW9ucyxcbiAgICAgICAgY291bnQ6IG9wZW5QcmVkaWN0aW9ucy5sZW5ndGhcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KTtcbiAgfVxufSJdLCJuYW1lcyI6WyJBZ2VudE1hbmFnZXIiLCJhZ2VudE1hbmFnZXIiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwiYWdlbnRJZCIsInN1YmplY3QiLCJwcmVkaWN0aW9uIiwiY29uZmlkZW5jZSIsInRpbWVmcmFtZSIsInJlYXNvbmluZyIsInJlc29sdXRpb25EYXRlIiwic3Rha2VBbW91bnQiLCJib2R5Iiwic3RhdHVzIiwianNvbiIsImVycm9yIiwicHJlZGljdGlvbkRhdGEiLCJpZCIsIkRhdGUiLCJub3ciLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHIiLCJhZ2VudE5hbWUiLCJ0eXBlIiwidG9waWMiLCJjb250ZW50IiwibWV0YWRhdGEiLCJyZXN1bHQiLCJhZ2VudE1ha2VQcmVkaWN0aW9uIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJwcmVkaWN0aW9ucyIsImdldEFsbENvbnRlbnQiLCJvcGVuUHJlZGljdGlvbnMiLCJmaWx0ZXIiLCJpdGVtIiwicmVzb2x2ZWQiLCJjb3VudCIsImxlbmd0aCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/agents/predict.js\n");

/***/ }),

/***/ "(api)/./supabase/config.js":
/*!****************************!*\
  !*** ./supabase/config.js ***!
  \****************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("// Supabase Configuration\n\nconst { createClient } = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n// 环境变量应包含 SUPABASE_URL 和 SUPABASE_ANON_KEY\nconst supabaseUrl = process.env.SUPABASE_URL;\nconst supabaseAnonKey = process.env.SUPABASE_ANON_KEY;\nif (!supabaseUrl || !supabaseAnonKey) {\n    console.warn(\"Supabase configuration not found. Database functionality will be limited.\");\n    console.warn(\"Please set SUPABASE_URL and SUPABASE_ANON_KEY environment variables.\");\n    console.log(\"Your Supabase project URL should be: https://mxhjvhmgtdnxbteyokij.supabase.co\");\n    console.log(\"Database host: db.mxhjvhmgtdnxbteyokij.supabase.co\");\n}\nconst supabase = supabaseUrl && supabaseAnonKey ? createClient(supabaseUrl, supabaseAnonKey) : null;\nmodule.exports = {\n    default: supabase,\n    supabaseUrl,\n    supabaseAnonKey\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zdXBhYmFzZS9jb25maWcuanMiLCJtYXBwaW5ncyI6IkFBQUEseUJBQXlCOztBQUN6QixNQUFNLEVBQUVBLFlBQVksRUFBRSxHQUFHQyxtQkFBT0EsQ0FBQztBQUVqQywyQ0FBMkM7QUFDM0MsTUFBTUMsY0FBY0MsUUFBUUMsR0FBRyxDQUFDQyxZQUFZO0FBQzVDLE1BQU1DLGtCQUFrQkgsUUFBUUMsR0FBRyxDQUFDRyxpQkFBaUI7QUFFckQsSUFBSSxDQUFDTCxlQUFlLENBQUNJLGlCQUFpQjtJQUNwQ0UsUUFBUUMsSUFBSSxDQUFDO0lBQ2JELFFBQVFDLElBQUksQ0FBQztJQUNiRCxRQUFRRSxHQUFHLENBQUM7SUFDWkYsUUFBUUUsR0FBRyxDQUFDO0FBQ2Q7QUFFQSxNQUFNQyxXQUFXVCxlQUFlSSxrQkFDNUJOLGFBQWFFLGFBQWFJLG1CQUMxQjtBQUVKTSxPQUFPQyxPQUFPLEdBQUc7SUFDZkMsU0FBU0g7SUFDVFQ7SUFDQUk7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL21vbHRib3QtcHJlc3MvLi9zdXBhYmFzZS9jb25maWcuanM/NDc4YyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTdXBhYmFzZSBDb25maWd1cmF0aW9uXG5jb25zdCB7IGNyZWF0ZUNsaWVudCB9ID0gcmVxdWlyZSgnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJyk7XG5cbi8vIOeOr+Wig+WPmOmHj+W6lOWMheWQqyBTVVBBQkFTRV9VUkwg5ZKMIFNVUEFCQVNFX0FOT05fS0VZXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52LlNVUEFCQVNFX1VSTDtcbmNvbnN0IHN1cGFiYXNlQW5vbktleSA9IHByb2Nlc3MuZW52LlNVUEFCQVNFX0FOT05fS0VZO1xuXG5pZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZUFub25LZXkpIHtcbiAgY29uc29sZS53YXJuKCdTdXBhYmFzZSBjb25maWd1cmF0aW9uIG5vdCBmb3VuZC4gRGF0YWJhc2UgZnVuY3Rpb25hbGl0eSB3aWxsIGJlIGxpbWl0ZWQuJyk7XG4gIGNvbnNvbGUud2FybignUGxlYXNlIHNldCBTVVBBQkFTRV9VUkwgYW5kIFNVUEFCQVNFX0FOT05fS0VZIGVudmlyb25tZW50IHZhcmlhYmxlcy4nKTtcbiAgY29uc29sZS5sb2coJ1lvdXIgU3VwYWJhc2UgcHJvamVjdCBVUkwgc2hvdWxkIGJlOiBodHRwczovL214aGp2aG1ndGRueGJ0ZXlva2lqLnN1cGFiYXNlLmNvJyk7XG4gIGNvbnNvbGUubG9nKCdEYXRhYmFzZSBob3N0OiBkYi5teGhqdmhtZ3RkbnhidGV5b2tpai5zdXBhYmFzZS5jbycpO1xufVxuXG5jb25zdCBzdXBhYmFzZSA9IHN1cGFiYXNlVXJsICYmIHN1cGFiYXNlQW5vbktleSBcbiAgPyBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlQW5vbktleSlcbiAgOiBudWxsO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHsgXG4gIGRlZmF1bHQ6IHN1cGFiYXNlLFxuICBzdXBhYmFzZVVybCxcbiAgc3VwYWJhc2VBbm9uS2V5IFxufTsiXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50IiwicmVxdWlyZSIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIlNVUEFCQVNFX1VSTCIsInN1cGFiYXNlQW5vbktleSIsIlNVUEFCQVNFX0FOT05fS0VZIiwiY29uc29sZSIsIndhcm4iLCJsb2ciLCJzdXBhYmFzZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./supabase/config.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fagents%2Fpredict&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fagents%2Fpredict.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();