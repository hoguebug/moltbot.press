"use strict";(()=>{var e={};e.id=206,e.ids=[206],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},7702:e=>{e.exports=require("events")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},1764:e=>{e.exports=require("util")},1309:e=>{e.exports=import("@supabase/supabase-js")},4014:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{config:()=>u,default:()=>g,routeModule:()=>c});var n=a(1802),r=a(7153),i=a(6249),l=a(2958),o=e([l]);l=(o.then?(await o)():o)[0];let g=(0,i.l)(l,"default"),u=(0,i.l)(l,"config"),c=new n.PagesAPIRouteModule({definition:{kind:r.x.PAGES_API,page:"/api/agents/status",pathname:"/api/agents/status",bundlePath:"",filename:""},userland:l});s()}catch(e){s(e)}})},2958:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{default:()=>i});var n=a(5425),r=e([n]);n=(r.then?(await r)():r)[0];let l=global.agentManager||new n.Z;async function i(e,t){if("GET"===e.method)try{let e=await l.getActiveAgents(),a=l.getChannels(),s=await l.getAllMessages(10),n=(await l.getAllMessages()).length,r=await l.getAllContent(),i=r.slice(0,10),o=await l.getDatabaseHealth();t.status(200).json({success:!0,status:"running",timestamp:new Date().toISOString(),stats:{activeAgents:e.length,totalMessages:n,channels:a.length,totalContent:r.length},database:o,activeAgents:e,recentMessages:s,recentContent:i,channels:a})}catch(e){t.status(500).json({error:e.message})}else t.status(405).json({error:"Method not allowed"})}global.agentManager=l,s()}catch(e){s(e)}})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[372],()=>a(4014));module.exports=s})();